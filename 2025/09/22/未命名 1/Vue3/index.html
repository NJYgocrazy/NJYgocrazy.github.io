<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Vue3基础 | NJYgocrazy</title><meta name="author" content="NJY"><meta name="copyright" content="NJY"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Vue3基础用法与API">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue3基础">
<meta property="og:url" content="http://example.com/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/Vue3/index.html">
<meta property="og:site_name" content="NJYgocrazy">
<meta property="og:description" content="Vue3基础用法与API">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s21.ax1x.com/2025/09/22/pV4zO8P.png">
<meta property="article:published_time" content="2025-09-22T12:54:20.519Z">
<meta property="article:modified_time" content="2025-09-22T12:54:20.520Z">
<meta property="article:author" content="NJY">
<meta property="article:tag" content="前端">
<meta property="article:tag" content="Vue3">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s21.ax1x.com/2025/09/22/pV4zO8P.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Vue3基础",
  "url": "http://example.com/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/Vue3/",
  "image": "https://s21.ax1x.com/2025/09/22/pV4zO8P.png",
  "datePublished": "2025-09-22T12:54:20.519Z",
  "dateModified": "2025-09-22T12:54:20.520Z",
  "author": [
    {
      "@type": "Person",
      "name": "NJY",
      "url": "http://example.com/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/Vue3/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Vue3基础',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><link rel="stylesheet" href="/css/custom.css" media="defer" onload="this.media='all'"><!-- hexo injector head_end start --><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-categories-card@1.0.0/lib/categorybar.css"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body><div id="web_bg" style="background-image: url(/img/top.png);"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/ava.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://s21.ax1x.com/2025/09/22/pV4zO8P.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">NJYgocrazy</span></a><a class="nav-page-title" href="/"><span class="site-name">Vue3基础</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Vue3基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-09-22T12:54:20.519Z" title="发表于 2025-09-22 12:54:20">2025-09-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-09-22T12:54:20.520Z" title="更新于 2025-09-22 12:54:20">2025-09-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h2 id="【v-】"><a href="#【v-】" class="headerlink" title="【v-】"></a>【v-】</h2><p>注：这里只是简单列举出了这些指令 在后续笔记中 某些指令会有完整的介绍</p>
<p>Vue 提供了一系列以 <code>v-</code> 开头的指令（Directives），用于在模板中实现各种交互逻辑和渲染控制。以下是常用 <code>v-</code> 指令的系统总结：</p>
<h3 id="一、核心渲染与数据绑定指令"><a href="#一、核心渲染与数据绑定指令" class="headerlink" title="一、核心渲染与数据绑定指令"></a>一、核心渲染与数据绑定指令</h3><h4 id="1-v-text"><a href="#1-v-text" class="headerlink" title="1. v-text"></a>1. <code>v-text</code></h4><ul>
<li><strong>作用</strong>：设置元素的文本内容（替代 <code>&#123;&#123; &#125;&#125;</code> 插值）</li>
<li><strong>特点</strong>：会覆盖元素原有的文本，不解析 HTML</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-text=&quot;message&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!-- 等价于 &lt;div&gt;&#123;&#123; message &#125;&#125;&lt;/div&gt; --&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-v-html"><a href="#2-v-html" class="headerlink" title="2. v-html"></a>2. <code>v-html</code></h4><ul>
<li><strong>作用</strong>：设置元素的 HTML 内容（解析 HTML 标签）</li>
<li><strong>注意</strong>：有 XSS 风险，仅用于可信内容，不可用于用户输入</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-html=&quot;htmlContent&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;!-- 若 htmlContent 是 &quot;&lt;strong&gt;Hello&lt;/strong&gt;&quot;，则渲染为粗体文本 --&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-v-bind（简写-）"><a href="#3-v-bind（简写-）" class="headerlink" title="3. v-bind（简写 :）"></a>3. <code>v-bind</code>（简写 <code>:</code>）</h4><ul>
<li><strong>作用</strong>：动态绑定 HTML 属性、组件 props、CSS 类、样式等</li>
<li><strong>用法</strong>：<code>v-bind:属性名=&quot;表达式&quot;</code> 或 <code>:属性名=&quot;表达式&quot;</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 绑定普通属性 --&gt;</span><br><span class="line">&lt;img :src=&quot;imageUrl&quot; :alt=&quot;imageDesc&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 绑定 class（对象/数组语法） --&gt;</span><br><span class="line">&lt;div :class=&quot;&#123; active: isActive, &#x27;text-danger&#x27;: hasError &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div :class=&quot;[baseClass, isActive ? &#x27;active&#x27; : &#x27;&#x27;]&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 绑定 style（对象/数组语法） --&gt;</span><br><span class="line">&lt;div :style=&quot;&#123; color: textColor, fontSize: &#x27;16px&#x27; &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div :style=&quot;[baseStyle, customStyle]&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 动态属性名 --&gt;</span><br><span class="line">&lt;div :[dynamicAttr]=&quot;value&quot;&gt;&lt;/div&gt; &lt;!-- dynamicAttr 是变量，决定属性名 --&gt;</span><br></pre></td></tr></table></figure>

<h3 id="二、条件渲染指令"><a href="#二、条件渲染指令" class="headerlink" title="二、条件渲染指令"></a>二、条件渲染指令</h3><h4 id="1-v-if"><a href="#1-v-if" class="headerlink" title="1. v-if"></a>1. <code>v-if</code></h4><ul>
<li><strong>作用</strong>：根据表达式真假，决定是否渲染元素（条件为 <code>false</code> 时不生成 DOM）</li>
<li><strong>搭配</strong>：<code>v-else-if</code>（多条件判断）、<code>v-else</code>（兜底条件），三者需连续书写</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-if=&quot;score &gt;= 90&quot;&gt;优秀&lt;/div&gt;</span><br><span class="line">&lt;div v-else-if=&quot;score &gt;= 60&quot;&gt;及格&lt;/div&gt;</span><br><span class="line">&lt;div v-else&gt;不及格&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-v-show"><a href="#2-v-show" class="headerlink" title="2. v-show"></a>2. <code>v-show</code></h4><ul>
<li><strong>作用</strong>：根据表达式真假，控制元素显示 &#x2F; 隐藏（通过 <code>display: none</code> 实现，始终生成 DOM）</li>
<li><strong>区别</strong>：<code>v-if</code> 适合切换频率低的场景，<code>v-show</code> 适合切换频繁的场景</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-show=&quot;isVisible&quot;&gt;频繁切换显示/隐藏时用我&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>我们在这里区分一下 v-if 与 v-show</p>
<p>v-if 当不满足条件不再显示之后 执行的是对原组件的销毁</p>
<p>而 v-show 不满足条件不再显示之后 执行的是对原组件的隐藏 组件的结构是没有被改变的</p>
<h3 id="三、列表渲染指令"><a href="#三、列表渲染指令" class="headerlink" title="三、列表渲染指令"></a>三、列表渲染指令</h3><h4 id="v-for"><a href="#v-for" class="headerlink" title="v-for"></a><code>v-for</code></h4><ul>
<li><strong>作用</strong>：基于源数据（数组、对象、字符串、数字）循环渲染元素</li>
<li><strong>语法</strong>：<code>v-for=&quot;(item, index) in 数据源&quot;</code>（数组）、<code>v-for=&quot;(value, key, index) in 对象&quot;</code></li>
<li><strong>必须</strong>：绑定 <code>:key</code> 属性（唯一标识，优化渲染性能）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 遍历数组 --&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li v-for=&quot;(user, index) in users&quot; :key=&quot;user.id&quot;&gt;</span><br><span class="line">    &#123;&#123; index + 1 &#125;&#125;. &#123;&#123; user.name &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 遍历对象 --&gt;</span><br><span class="line">&lt;div v-for=&quot;(value, key) in info&quot; :key=&quot;key&quot;&gt;</span><br><span class="line">  &#123;&#123; key &#125;&#125;: &#123;&#123; value &#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p><code>v-for</code> 是 Vue 中用于列表渲染的核心指令，它可以基于源数据（数组、对象、字符串等）重复渲染元素或组件。以下是其详细用法和核心知识点：</p>
<p><strong>一、基本语法（遍历数组）</strong></p>
<p>最常用场景是遍历数组，语法为：<br><code>v-for=&quot;(item, index) in 数组&quot;</code></p>
<ul>
<li><code>item</code>：数组中的当前元素（必填）</li>
<li><code>index</code>：当前元素的索引（可选，从 0 开始）</li>
<li><code>in</code> 可替换为 <code>of</code>（更符合 JavaScript 语法习惯）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;!-- 仅使用元素 --&gt;</span><br><span class="line">    &lt;li v-for=&quot;user in users&quot; :key=&quot;user.id&quot;&gt;</span><br><span class="line">      &#123;&#123; user.name &#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 同时使用元素和索引 --&gt;</span><br><span class="line">    &lt;li v-for=&quot;(user, index) of users&quot; :key=&quot;index&quot;&gt;</span><br><span class="line">      &#123;&#123; index + 1 &#125;&#125;. &#123;&#123; user.name &#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const users = [</span><br><span class="line">  &#123; id: 1, name: &quot;张三&quot; &#125;,</span><br><span class="line">  &#123; id: 2, name: &quot;李四&quot; &#125;,</span><br><span class="line">];</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>二、遍历对象</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">v-for` 也可遍历对象的键值对，语法为：</span><br><span class="line">`v-for=&quot;(value, key, index) in 对象&quot;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>value</code>：属性值（必填）</li>
<li><code>key</code>：属性名（可选）</li>
<li><code>index</code>：索引（可选，从 0 开始）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-for=&quot;(value, key, index) in user&quot; :key=&quot;key&quot;&gt;</span><br><span class="line">    &#123;&#123; index &#125;&#125;. &#123;&#123; key &#125;&#125;: &#123;&#123; value &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">const user = &#123; name: &quot;张三&quot;, age: 18, gender: &quot;男&quot; &#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>三、遍历字符串 &#x2F; 数字</strong></p>
<ul>
<li>遍历字符串：按字符拆分</li>
<li>遍历数字：从 1 开始计数到该数字</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 遍历字符串 --&gt;</span><br><span class="line">&lt;div v-for=&quot;(char, index) in &#x27;hello&#x27;&quot; :key=&quot;index&quot;&gt;&#123;&#123; char &#125;&#125;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 遍历数字（渲染 3 个元素） --&gt;</span><br><span class="line">&lt;div v-for=&quot;num in 3&quot; :key=&quot;num&quot;&gt;&#123;&#123; num &#125;&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p><strong>四、必须的 <code>key</code> 属性</strong></p>
<p>Vue 要求在 <code>v-for</code> 中为每个循环项绑定 <code>:key</code>，作用是：</p>
<ol>
<li><strong>标识唯一性</strong>：帮助 Vue 区分不同元素，提高列表更新时的渲染性能（避免不必要的 DOM 重新创建）。</li>
<li><strong>避免状态混乱</strong>：确保组件 &#x2F; 元素的状态（如表单输入值）在列表变化时正确保留。</li>
</ol>
<p><strong>注意</strong>：</p>
<ul>
<li>优先使用<strong>唯一且稳定的标识</strong>（如数据的 <code>id</code>）作为 <code>key</code>，而非索引 <code>index</code>（索引会随数组排序 &#x2F; 删除变化，可能导致性能问题）。</li>
<li><code>key</code> 的值需为字符串或数字，且在当前循环中唯一。</li>
</ul>
<p>所以在后续我们要对 v-for 的每个元素进行针对性的操作的时候 用的索引也是这个 key</p>
<p><strong>五、注意事项</strong></p>
<ol>
<li><p>**避免在 <code>v-for</code> 中使用 <code>v-if</code>**：两者同时存在时，<code>v-for</code> 优先级更高，可能导致不必要的循环执行。如需过滤数据，建议在逻辑层（<code>computed</code>）处理：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;li v-for=&quot;user in activeUsers&quot; :key=&quot;user.id&quot;&gt;</span><br><span class="line">    &#123;&#123; user.name &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; computed &#125; from &quot;vue&quot;;</span><br><span class="line">const activeUsers = computed(() =&gt; users.filter((u) =&gt; u.isActive));</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>遍历范围</strong>：<code>v-for</code> 只能用于单个元素或 <code>&lt;template&gt;</code>，不能直接用于 <code>&lt;slot&gt;</code>、<code>v-text</code> 等指令。</p>
</li>
<li><p><strong>性能优化</strong>：对于大数据列表，可结合 <code>v-memo</code> 或虚拟滚动（如 <code>vue-virtual-scroller</code>）减少渲染压力。</p>
</li>
</ol>
<h3 id="四、事件处理指令"><a href="#四、事件处理指令" class="headerlink" title="四、事件处理指令"></a>四、事件处理指令</h3><h4 id="v-on（简写-）"><a href="#v-on（简写-）" class="headerlink" title="v-on（简写 @）"></a><code>v-on</code>（简写 <code>@</code>）</h4><ul>
<li><strong>作用</strong>：绑定事件监听器（DOM 事件或自定义事件）</li>
<li><strong>用法</strong>：<code>v-on:事件名=&quot;处理函数&quot;</code> 或 <code>@事件名=&quot;处理函数&quot;</code></li>
<li><strong>扩展</strong>：支持事件修饰符（如 <code>.stop</code>、<code>.prevent</code>）、按键修饰符（如 <code>.enter</code>）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 基础用法 --&gt;</span><br><span class="line">&lt;button @click=&quot;handleClick&quot;&gt;点击我&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 传递参数 --&gt;</span><br><span class="line">&lt;button @click=&quot;handleDelete(id)&quot;&gt;删除&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 事件修饰符 --&gt;</span><br><span class="line">&lt;form @submit.prevent=&quot;handleSubmit&quot;&gt; &lt;!-- 阻止表单默认提交行为 --&gt;</span><br><span class="line">  &lt;input @keyup.enter=&quot;handleEnter&quot;&gt; &lt;!-- 按 Enter 键触发 --&gt;</span><br><span class="line">  &lt;div @click.stop=&quot;handleDivClick&quot;&gt; &lt;!-- 阻止事件冒泡 --&gt;</span><br><span class="line">    &lt;button @click=&quot;handleBtnClick&quot;&gt;按钮&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<h3 id="五、表单输入绑定指令"><a href="#五、表单输入绑定指令" class="headerlink" title="五、表单输入绑定指令"></a>五、表单输入绑定指令</h3><h4 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a><code>v-model</code></h4><ul>
<li><strong>作用</strong>：在表单元素（input、select、textarea 等）上创建双向数据绑定</li>
<li><strong>特点</strong>：自动同步表单值与数据，适用于用户输入场景</li>
<li><strong>修饰符</strong>：<code>.trim</code>（去除首尾空格）、<code>.number</code>（转为数字）、<code>.lazy</code>（失焦后同步）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 文本输入 --&gt;</span><br><span class="line">&lt;input v-model=&quot;username&quot; placeholder=&quot;请输入用户名&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 复选框 --&gt;</span><br><span class="line">&lt;input type=&quot;checkbox&quot; v-model=&quot;isAgree&quot;&gt; 同意协议</span><br><span class="line"></span><br><span class="line">&lt;!-- 单选框 --&gt;</span><br><span class="line">&lt;input type=&quot;radio&quot; v-model=&quot;gender&quot; value=&quot;male&quot;&gt; 男</span><br><span class="line">&lt;input type=&quot;radio&quot; v-model=&quot;gender&quot; value=&quot;female&quot;&gt; 女</span><br><span class="line"></span><br><span class="line">&lt;!-- 下拉选择 --&gt;</span><br><span class="line">&lt;select v-model=&quot;city&quot;&gt;</span><br><span class="line">  &lt;option value=&quot;beijing&quot;&gt;北京&lt;/option&gt;</span><br><span class="line">  &lt;option value=&quot;shanghai&quot;&gt;上海&lt;/option&gt;</span><br><span class="line">&lt;/select&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 修饰符用法 --&gt;</span><br><span class="line">&lt;input v-model.trim=&quot;username&quot;&gt; &lt;!-- 自动去除首尾空格 --&gt;</span><br><span class="line">&lt;input v-model.number=&quot;age&quot; type=&quot;number&quot;&gt; &lt;!-- 转为数字类型 --&gt;</span><br></pre></td></tr></table></figure>

<h3 id="六、其他实用指令"><a href="#六、其他实用指令" class="headerlink" title="六、其他实用指令"></a>六、其他实用指令</h3><h4 id="1-v-pre"><a href="#1-v-pre" class="headerlink" title="1. v-pre"></a>1. <code>v-pre</code></h4><ul>
<li><strong>作用</strong>：跳过元素及其子元素的编译过程（直接渲染原始内容，不解析插值和指令）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-pre&gt;&#123;&#123; 这里的插值不会被解析，会原样显示 &#125;&#125;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-v-cloak"><a href="#2-v-cloak" class="headerlink" title="2. v-cloak"></a>2. <code>v-cloak</code></h4><ul>
<li><strong>作用</strong>：在 Vue 实例编译完成前隐藏元素，避免页面闪烁（配合 CSS 使用）</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-attr">[v-cloak]</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125; <span class="comment">/* 编译完成前隐藏 */</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-cloak&gt;&#123;&#123; message &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;!-- 编译完成后才显示内容 --&gt;</span><br></pre></td></tr></table></figure>

<h4 id="3-v-once"><a href="#3-v-once" class="headerlink" title="3. v-once"></a>3. <code>v-once</code></h4><ul>
<li><strong>作用</strong>：元素和组件只渲染一次，后续数据变化不会重新渲染（优化静态内容性能）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;div v-once&gt;&#123;&#123; staticMessage &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;!-- 即使 staticMessage 变化，也不会重新渲染 --&gt;</span><br></pre></td></tr></table></figure>

<p><strong>总结</strong></p>
<p>Vue 的 <code>v-</code> 指令是模板语法的核心，覆盖了数据绑定、条件渲染、列表循环、事件处理、表单交互等常见场景。掌握这些指令的用法，能高效实现各种交互逻辑，其中：</p>
<ul>
<li><code>v-bind</code> 和 <code>v-on</code> 是最基础的绑定指令（简写 <code>:</code> 和 <code>@</code> 需熟练使用）；</li>
<li><code>v-if</code>&#x2F;<code>v-show</code>、<code>v-for</code> 用于控制元素渲染；</li>
<li><code>v-model</code> 是表单交互的核心；</li>
<li>其他指令（<code>v-pre</code>、<code>v-cloak</code> 等）用于特定优化场景。</li>
</ul>
<h2 id="【响应式数据】"><a href="#【响应式数据】" class="headerlink" title="【响应式数据】"></a>【响应式数据】</h2><p>ref 能用来定义基本类型数据 和 对象类型数据（但底层上也是在 ref 中调用了 reactive）</p>
<p>reactive 用来定义对象类型数据</p>
<p>在模板中使用 ref 响应式数据的时候直接使用即可</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  &#123;&#123; name &#125;&#125;</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">let</span> name = <span class="title function_">ref</span>(<span class="string">&quot;lisi&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>但在 js 代码中需要对响应式数据进行操控的时候必须对 <strong>响应式数据 . value</strong> 进行操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fuction <span class="title function_">changeName</span><span class="params">()</span> &#123;</span><br><span class="line">    name.value = <span class="string">&quot;zhangsan&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意同样地，当用 ref 定义对象类型的响应数据的时候一定不要忘了需要写 value</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> games = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&quot;1&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;zhang&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&quot;2&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;san&quot;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">change</span>(<span class="params"></span>) &#123;</span><br><span class="line">  games.<span class="property">value</span>[<span class="number">0</span>].<span class="property">name</span> = <span class="string">&quot;li&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>reactive 是深层次的 只要是被 reactive 包裹的对象 无论其中层级多深都会被改变</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> moutain = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">	<span class="attr">a</span>: &#123;</span><br><span class="line">		b&#123;</span><br><span class="line">			<span class="attr">c</span>:<span class="number">666</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">change</span>(<span class="params"></span>) &#123;</span><br><span class="line">	moutain.<span class="property">a</span>.<span class="property">b</span>.<span class="property">c</span> = <span class="number">999</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>宏观角度看：</p>
<ol>
<li>ref 用来定义：基本类型数据、对象类型数据；</li>
<li>reactive 用来定义：对象类型数据。</li>
</ol>
<ul>
<li><strong>区别：</strong></li>
</ul>
<ol>
<li>ref 创建的变量必须使用 .value（可以使用 volar 插件自动添加 .value）。</li>
<li>reactive 重新分配一个新对象，会失去响应式（可以使用 Object.assign 去整体替换）。</li>
</ol>
<p>什么意思呢 即如果把原对象数据直接赋值成一个新的对象 则这个对象会失去响应式</p>
<p>解决这个问题的方法如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">let</span> <span class="variable">car</span> <span class="operator">=</span> &#123;brand:<span class="string">&quot;benchi&quot;</span>,price: <span class="number">100</span>&#125;</span><br><span class="line"></span><br><span class="line">fuction <span class="title function_">changeCar</span><span class="params">()</span>&#123;</span><br><span class="line">	Object.assign(car,&#123;brand:<span class="string">&#x27;奥迪&#x27;</span>,price:<span class="number">100</span>&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​ <strong>Object.assign</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">assign</span>(target, ...sources);</span><br></pre></td></tr></table></figure>

<p>​ <code>target</code>：目标对象，也就是要将其他对象属性合并进去的对象，该对象会被修改。</p>
<p>​ <code>...sources</code>：一个或多个源对象，这些对象的可枚举自身属性（包括 <code>Symbol</code> 属性以外的可枚举属性）会被复制到目标对象。</p>
<p>​ 可以进行几个对象元素的合并 当源对象中有同名属性时，后面源对象的属性会覆盖前面源对象的同名属性。</p>
<p>​ <code>Object.assign()</code> 执行的是浅拷贝，也就是说，如果源对象的属性值是一个对象，那么复制的是该对象的引用，而不是创建一个新的对象。需要注意的是，由于 <code>Object.assign()</code> 是浅拷贝，对于包含嵌套对象的情况，如果需要深拷贝，就需要使用如 <code>JSON.parse(JSON.stringify())</code> 或者第三方库（如 <code>lodash</code> 的 <code>cloneDeep</code> 方法 ）等其他方式来处理。</p>
<p>但是如果用的是 ref 包裹对象的话 就不会有这种烦恼 因为在改变的过程中 我们会直接写</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">changeCar</span>(<span class="params"></span>) &#123;</span><br><span class="line">  car.<span class="property">value</span> = &#123; <span class="attr">brand</span>: <span class="string">&quot;aodi&quot;</span>, <span class="attr">price</span>: <span class="number">100</span> &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>使用原则：</strong></li>
</ul>
<ol>
<li>若需要一个基本类型的响应式数据，必须使用 ref。</li>
<li>若需要一个响应式对象，层级不深，ref、 reactive 都可以。</li>
<li>若需要一个响应式对象，且层级较深，推荐使用 reactive。</li>
</ol>
<h2 id="【toRefs-与-toRef】"><a href="#【toRefs-与-toRef】" class="headerlink" title="【toRefs 与 toRef】"></a>【toRefs 与 toRef】</h2><ul>
<li>作用：将一个响应式对象中的每一个属性，转换为<code>ref</code>对象。</li>
<li>备注：<code>toRefs</code>与<code>toRef</code>功能一致，但<code>toRefs</code>可以批量转换。</li>
<li>语法如下：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;性别：&#123;&#123; person.gender &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeGender&quot;&gt;修改性别&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; ref, reactive, toRefs, toRef &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">// 数据</span><br><span class="line">let person = reactive(&#123; name: &quot;张三&quot;, age: 18, gender: &quot;男&quot; &#125;);</span><br><span class="line"></span><br><span class="line">// 通过toRefs将person对象中的n个属性批量取出，且依然保持响应式的能力</span><br><span class="line">let &#123; name, gender &#125; = toRefs(person);</span><br><span class="line"></span><br><span class="line">// 通过toRef将person对象中的gender属性取出，且依然保持响应式的能力</span><br><span class="line">let age = toRef(person, &quot;age&quot;);</span><br><span class="line"></span><br><span class="line">// 方法</span><br><span class="line">function changeName() &#123;</span><br><span class="line">  name.value += &quot;~&quot;;</span><br><span class="line">&#125;</span><br><span class="line">function changeAge() &#123;</span><br><span class="line">  age.value += 1;</span><br><span class="line">&#125;</span><br><span class="line">function changeGender() &#123;</span><br><span class="line">  gender.value = &quot;女&quot;;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="【computed】"><a href="#【computed】" class="headerlink" title="【computed】"></a>【computed】</h2><p>在 Vue 3 中，<code>computed</code>计算属性主要用于<strong>根据响应式数据（如<code>ref</code>、<code>reactive</code>、Pinia 状态等）派生新的响应式数据</strong>，它的核心作用是缓存计算结果并保持<strong>响应式依赖跟踪</strong>。</p>
<p>在我们后面用 pinia 进行组件通信的时候是经常用到它这个特性的。</p>
<p>作用：根据已有数据计算出新数据（和<code>Vue2</code>中的<code>computed</code>作用一致）。</p>
<p>computed 的一大好处（特点）是 它当且仅当涉及到（依赖）的变量数据发生改变的时候才进行计算 即就算大量引用这个计算属性数据 只要依赖数据没发生改变 也只会进行一次计算（即计算属性是有缓存的）</p>
<p>注意在其中我们会写 get 和 set 方法 其中 get 方法用来返回值（即对读取值进行一些操作）</p>
<p>set 方法用来设置新值</p>
<p>看下面代码 fullName 是我们用计算属性 computed 来包裹的 它的数据类型是一个 Computed RefImpl 当我们对其 value 进行修改时 可以通过 set 方法拿到这个新设置的 value 并且对它进行操作</p>
<p>并且 像我们下面写的那个 changefullname 函数是当且仅当对 fullName 设置了 set 方法 让其不止可读的时候才能使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    姓：&lt;input type=&quot;text&quot; v-model=&quot;firstName&quot; /&gt; &lt;br /&gt;</span><br><span class="line">    名：&lt;input type=&quot;text&quot; v-model=&quot;lastName&quot; /&gt; &lt;br /&gt;</span><br><span class="line">    全名：&lt;span&gt;&#123;&#123; fullName &#125;&#125;&lt;/span&gt; &lt;br /&gt;</span><br><span class="line">    &lt;button @click=&quot;changeFullName&quot;&gt;全名改为：li-si&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;App&quot;&gt;</span><br><span class="line">import &#123; ref, computed &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">let firstName = ref(&quot;zhang&quot;);</span><br><span class="line">let lastName = ref(&quot;san&quot;);</span><br><span class="line"></span><br><span class="line">// 计算属性——只读取，不修改</span><br><span class="line">/* let fullName = computed(()=&gt;&#123;</span><br><span class="line">    return firstName.value + &#x27;-&#x27; + lastName.value</span><br><span class="line">  &#125;) */</span><br><span class="line"></span><br><span class="line">// 计算属性——既读取又修改</span><br><span class="line">let fullName = computed(&#123;</span><br><span class="line">  // 读取</span><br><span class="line">  get() &#123;</span><br><span class="line">    return firstName.value + &quot;-&quot; + lastName.value;</span><br><span class="line">  &#125;,</span><br><span class="line">  // 修改</span><br><span class="line">  set(val) &#123;</span><br><span class="line">    console.log(&quot;有人修改了fullName&quot;, val);</span><br><span class="line">    firstName.value = val.split(&quot;-&quot;)[0];</span><br><span class="line">    lastName.value = val.split(&quot;-&quot;)[1];</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">function changeFullName() &#123;</span><br><span class="line">  fullName.value = &quot;li-si&quot;;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="【watch】"><a href="#【watch】" class="headerlink" title="【watch】"></a>【watch】</h2><ul>
<li>作用：监视数据的变化（和<code>Vue2</code>中的<code>watch</code>作用一致）</li>
<li>特点：<code>Vue3</code>中的<code>watch</code>只能监视以下<strong>四种数据</strong>：</li>
</ul>
<blockquote>
<ol>
<li><code>ref</code>定义的数据。注意：这里定义的数据是不用写.value 的 应该直接写这个数据本身</li>
<li><code>reactive</code>定义的数据。</li>
<li>函数返回一个值（<code>getter</code>函数）。</li>
<li>一个包含上述内容的数组。</li>
</ol>
</blockquote>
<p>watch 监视的基本语法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">watch</span>(被监视的目标数据, 回调函数);</span><br><span class="line"><span class="comment">//进一步地 一般回调函数的写法是</span></span><br><span class="line"><span class="title function_">watch</span>(sum, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure>

<p>watch 有一个返回值 可以用来终止监视 基本的写法为</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> stopWatch = <span class="title function_">watch</span>(sum, <span class="function">(<span class="params">newValue, oldValue</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (sum &gt; <span class="number">10</span>) &#123;</span><br><span class="line">    <span class="title function_">stopWatch</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>我们在<code>Vue3</code>中使用<code>watch</code>的时候，通常会遇到以下几种情况：</p>
<h3 id="情况一"><a href="#情况一" class="headerlink" title="* 情况一"></a>* 情况一</h3><p>监视<code>ref</code>定义的【基本类型】数据：直接写数据名即可，监视的是其<code>value</code>值的改变。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;情况一：监视【ref】定义的【基本类型】数据&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;当前求和为：&#123;&#123; sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;点我sum+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; ref, watch &#125; from &quot;vue&quot;;</span><br><span class="line">// 数据</span><br><span class="line">let sum = ref(0);</span><br><span class="line">// 方法</span><br><span class="line">function changeSum() &#123;</span><br><span class="line">  sum.value += 1;</span><br><span class="line">&#125;</span><br><span class="line">// 监视，情况一：监视【ref】定义的【基本类型】数据</span><br><span class="line">const stopWatch = watch(sum, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">  console.log(&quot;sum变化了&quot;, newValue, oldValue);</span><br><span class="line">  if (newValue &gt;= 10) &#123;</span><br><span class="line">    stopWatch();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="情况二"><a href="#情况二" class="headerlink" title="* 情况二"></a>* 情况二</h3><p>监视<code>ref</code>定义的【对象类型】数据：直接写数据名，监视的是对象的【地址值】，若想监视对象内部的数据，要手动开启深度监视。</p>
<p>下面的这个注意可以类比为一个房子 改变属性相当于装修 不会改变 value（因为地址没有改变） 而改变整个对象才相当于换房子 会改变 value （地址改变了）</p>
<blockquote>
<p>注意：</p>
<ul>
<li><p>若修改的是<code>ref</code>定义的对象中的属性，<code>newValue</code> 和 <code>oldValue</code> 都是新值，因为它们是同一个对象。</p>
</li>
<li><p>若修改整个<code>ref</code>定义的对象，<code>newValue</code> 是新值， <code>oldValue</code> 是旧值，因为不是同一个对象了。</p>
</li>
<li><p>总结来说 只要对象地址没有改变 new 和 old 就是一个值 否则就是不同值</p>
</li>
</ul>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;情况二：监视【ref】定义的【对象类型】数据&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changePerson&quot;&gt;修改整个人&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; ref, watch &#125; from &quot;vue&quot;;</span><br><span class="line">// 数据</span><br><span class="line">let person = ref(&#123;</span><br><span class="line">  name: &quot;张三&quot;,</span><br><span class="line">  age: 18,</span><br><span class="line">&#125;);</span><br><span class="line">// 方法</span><br><span class="line">function changeName() &#123;</span><br><span class="line">  person.value.name += &quot;~&quot;;</span><br><span class="line">&#125;</span><br><span class="line">function changeAge() &#123;</span><br><span class="line">  person.value.age += 1;</span><br><span class="line">&#125;</span><br><span class="line">function changePerson() &#123;</span><br><span class="line">  person.value = &#123; name: &quot;李四&quot;, age: 90 &#125;;</span><br><span class="line">&#125;</span><br><span class="line">/* </span><br><span class="line">    监视，情况一：监视【ref】定义的【对象类型】数据，监视的是对象的地址值，若想监视对象内部属性的变化，需要手动开启深度监视</span><br><span class="line">    watch的第一个参数是：被监视的数据</span><br><span class="line">    watch的第二个参数是：监视的回调</span><br><span class="line">    watch的第三个参数是：配置对象（deep、immediate等等.....） </span><br><span class="line">  */</span><br><span class="line">watch(</span><br><span class="line">  person,</span><br><span class="line">  (newValue, oldValue) =&gt; &#123;</span><br><span class="line">    console.log(&quot;person变化了&quot;, newValue, oldValue);</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; deep: true &#125;</span><br><span class="line">);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="情况三"><a href="#情况三" class="headerlink" title="* 情况三"></a>* 情况三</h3><p>监视<code>reactive</code>定义的【对象类型】数据，且默认开启了深度监视。</p>
<p>注意这里改变对象 new 和 old 也是一样的 因为我们之前说过 用 Object.assign 修改对象的时候 是把相同的元素值更改掉 并没有改变其地址值 只是改变了元素值 故而 new 和 old 是一样的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;情况三：监视【reactive】定义的【对象类型】数据&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changePerson&quot;&gt;修改整个人&lt;/button&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;h2&gt;测试：&#123;&#123; obj.a.b.c &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;test&quot;&gt;修改obj.a.b.c&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; reactive, watch &#125; from &quot;vue&quot;;</span><br><span class="line">// 数据</span><br><span class="line">let person = reactive(&#123;</span><br><span class="line">  name: &quot;张三&quot;,</span><br><span class="line">  age: 18,</span><br><span class="line">&#125;);</span><br><span class="line">let obj = reactive(&#123;</span><br><span class="line">  a: &#123;</span><br><span class="line">    b: &#123;</span><br><span class="line">      c: 666,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">// 方法</span><br><span class="line">function changeName() &#123;</span><br><span class="line">  person.name += &quot;~&quot;;</span><br><span class="line">&#125;</span><br><span class="line">function changeAge() &#123;</span><br><span class="line">  person.age += 1;</span><br><span class="line">&#125;</span><br><span class="line">function changePerson() &#123;</span><br><span class="line">  Object.assign(person, &#123; name: &quot;李四&quot;, age: 80 &#125;);</span><br><span class="line">&#125;</span><br><span class="line">function test() &#123;</span><br><span class="line">  obj.a.b.c = 888;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 监视，情况三：监视【reactive】定义的【对象类型】数据，且默认是开启深度监视的</span><br><span class="line">watch(person, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">  console.log(&quot;person变化了&quot;, newValue, oldValue);</span><br><span class="line">&#125;);</span><br><span class="line">watch(obj, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">  console.log(&quot;Obj变化了&quot;, newValue, oldValue);</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="情况四"><a href="#情况四" class="headerlink" title="* 情况四"></a>* 情况四</h3><p>监视<code>ref</code>或<code>reactive</code>定义的【对象类型】数据中的<strong>某个属性</strong>，注意点如下：</p>
<ol>
<li>若该属性值<strong>不是</strong>【对象类型】，即基本类型，需要写成函数形式，直接写一个箭头函数即可。 为什么可以改成函数形式呢 其实就是我们之前所说的 watch 能够监视的其中一个类型 函数的返回值</li>
<li>若该属性值是<strong>依然</strong>是【对象类型】，可直接编，也可写成函数，建议写成函数。</li>
</ol>
<p>结论：监视的要是对象里的属性，那么<strong>最好写函数式</strong>，注意点：若是对象监视的是地址值，需要关注对象内部，需要手动开启深度监视。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;情况四：监视【ref】或【reactive】定义的【对象类型】数据中的某个属性&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;汽车：&#123;&#123; person.car.c1 &#125;&#125;、&#123;&#123; person.car.c2 &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC1&quot;&gt;修改第一台车&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC2&quot;&gt;修改第二台车&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar&quot;&gt;修改整个车&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; reactive, watch &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">// 数据</span><br><span class="line">let person = reactive(&#123;</span><br><span class="line">  name: &quot;张三&quot;,</span><br><span class="line">  age: 18,</span><br><span class="line">  car: &#123;</span><br><span class="line">    c1: &quot;奔驰&quot;,</span><br><span class="line">    c2: &quot;宝马&quot;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line">// 方法</span><br><span class="line">function changeName() &#123;</span><br><span class="line">  person.name += &quot;~&quot;;</span><br><span class="line">&#125;</span><br><span class="line">function changeAge() &#123;</span><br><span class="line">  person.age += 1;</span><br><span class="line">&#125;</span><br><span class="line">function changeC1() &#123;</span><br><span class="line">  person.car.c1 = &quot;奥迪&quot;;</span><br><span class="line">&#125;</span><br><span class="line">function changeC2() &#123;</span><br><span class="line">  person.car.c2 = &quot;大众&quot;;</span><br><span class="line">&#125;</span><br><span class="line">function changeCar() &#123;</span><br><span class="line">  person.car = &#123; c1: &quot;雅迪&quot;, c2: &quot;爱玛&quot; &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 监视，情况四：监视响应式对象中的某个属性，且该属性是基本类型的，要写成函数式</span><br><span class="line">/* watch(()=&gt; person.name,(newValue,oldValue)=&gt;&#123;</span><br><span class="line">    console.log(&#x27;person.name变化了&#x27;,newValue,oldValue)</span><br><span class="line">  &#125;) */</span><br><span class="line"></span><br><span class="line">// 监视，情况四：监视响应式对象中的某个属性，且该属性是对象类型的，可以直接写，也能写函数，更推荐写函数</span><br><span class="line">watch(</span><br><span class="line">  () =&gt; person.car,</span><br><span class="line">  (newValue, oldValue) =&gt; &#123;</span><br><span class="line">    console.log(&quot;person.car变化了&quot;, newValue, oldValue);</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123; deep: true &#125;</span><br><span class="line">);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>监视 <strong>对象类型的元素</strong> 最佳实践</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 监视，情况四：监视响应式对象中的某个属性，且该属性是对象类型的，可以直接写，也能写函数，更推荐写函数</span></span><br><span class="line">  <span class="title function_">watch</span>(<span class="function">()=&gt;</span>person.<span class="property">car</span>,<span class="function">(<span class="params">newValue,oldValue</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;person.car变化了&#x27;</span>,newValue,oldValue)</span><br><span class="line">  &#125;,&#123;<span class="attr">deep</span>:<span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="情况五"><a href="#情况五" class="headerlink" title="* 情况五"></a>* 情况五</h3><p>监视上述的多个数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;情况五：监视上述的多个数据&lt;/h1&gt;</span><br><span class="line">    &lt;h2&gt;姓名：&#123;&#123; person.name &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;年龄：&#123;&#123; person.age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;汽车：&#123;&#123; person.car.c1 &#125;&#125;、&#123;&#123; person.car.c2 &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC1&quot;&gt;修改第一台车&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeC2&quot;&gt;修改第二台车&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeCar&quot;&gt;修改整个车&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123;reactive,watch&#125; from &#x27;vue&#x27;</span><br><span class="line"></span><br><span class="line">// 数据</span><br><span class="line">let person = reactive(&#123;</span><br><span class="line">  name:&#x27;张三&#x27;,</span><br><span class="line">  age:18,</span><br><span class="line">  car:&#123;</span><br><span class="line">    c1:&#x27;奔驰&#x27;,</span><br><span class="line">    c2:&#x27;宝马&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">// 方法</span><br><span class="line">function changeName()&#123;</span><br><span class="line">  person.name += &#x27;~&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function changeAge()&#123;</span><br><span class="line">  person.age += 1</span><br><span class="line">&#125;</span><br><span class="line">function changeC1()&#123;</span><br><span class="line">  person.car.c1 = &#x27;奥迪&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function changeC2()&#123;</span><br><span class="line">  person.car.c2 = &#x27;大众&#x27;</span><br><span class="line">&#125;</span><br><span class="line">function changeCar()&#123;</span><br><span class="line">  person.car = &#123;c1:&#x27;雅迪&#x27;,c2:&#x27;爱玛&#x27;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 监视，情况五：监视上述的多个数据</span><br><span class="line">watch([()=&gt;person.name,person.car],(newValue,oldValue)=&gt;&#123;</span><br><span class="line">  console.log(&#x27;person.car变化了&#x27;,n ewValue,oldValue)</span><br><span class="line">&#125;,&#123;deep:true&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="【watchEffect】"><a href="#【watchEffect】" class="headerlink" title="【watchEffect】"></a>【watchEffect】</h2><ul>
<li><p>官网：立即运行一个函数，同时响应式地追踪其依赖，并在依赖更改时重新执行该函数。</p>
</li>
<li><p><code>watch</code>对比<code>watchEffect</code></p>
<blockquote>
<ol>
<li><p>都能监听响应式数据的变化，不同的是监听数据变化的方式不同</p>
</li>
<li><p><code>watch</code>：要明确指出监视的数据</p>
</li>
<li><p><code>watchEffect</code>：不用明确指出监视的数据（函数中用到哪些属性，那就监视哪些属性）。</p>
</li>
</ol>
</blockquote>
</li>
<li><p>示例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1&gt;需求：水温达到50℃，或水位达到20cm，则联系服务器&lt;/h1&gt;</span><br><span class="line">    &lt;h2 id=&quot;demo&quot;&gt;水温：&#123;&#123; temp &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;水位：&#123;&#123; height &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changePrice&quot;&gt;水温+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;水位+10&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; ref, watch, watchEffect &#125; from &quot;vue&quot;;</span><br><span class="line">// 数据</span><br><span class="line">let temp = ref(0);</span><br><span class="line">let height = ref(0);</span><br><span class="line"></span><br><span class="line">// 方法</span><br><span class="line">function changePrice() &#123;</span><br><span class="line">  temp.value += 10;</span><br><span class="line">&#125;</span><br><span class="line">function changeSum() &#123;</span><br><span class="line">  height.value += 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 用watch实现，需要明确的指出要监视：temp、height</span><br><span class="line">watch([temp, height], (value) =&gt; &#123;</span><br><span class="line">  // 从value中获取最新的temp值、height值</span><br><span class="line">  const [newTemp, newHeight] = value;</span><br><span class="line">  // 室温达到50℃，或水位达到20cm，立刻联系服务器</span><br><span class="line">  if (newTemp &gt;= 50 || newHeight &gt;= 20) &#123;</span><br><span class="line">    console.log(&quot;联系服务器&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">// 用watchEffect实现，不用</span><br><span class="line">const stopWtach = watchEffect(() =&gt; &#123;</span><br><span class="line">  // 室温达到50℃，或水位达到20cm，立刻联系服务器</span><br><span class="line">  if (temp.value &gt;= 50 || height.value &gt;= 20) &#123;</span><br><span class="line">    console.log(document.getElementById(&quot;demo&quot;)?.innerText);</span><br><span class="line">    console.log(&quot;联系服务器&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  // 水温达到100，或水位达到50，取消监视</span><br><span class="line">  if (temp.value === 100 || height.value === 50) &#123;</span><br><span class="line">    console.log(&quot;清理了&quot;);</span><br><span class="line">    stopWtach();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="【标签的-ref-属性】"><a href="#【标签的-ref-属性】" class="headerlink" title="【标签的 ref 属性】"></a>【标签的 ref 属性】</h2><p>作用：用于注册模板引用。</p>
<blockquote>
<ul>
<li><p>用在普通<code>DOM</code>标签上，获取的是<code>DOM</code>节点。</p>
</li>
<li><p>用在组件标签上，获取的是组件实例对象。</p>
</li>
</ul>
</blockquote>
<p>用在普通<code>DOM</code>标签上：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h1 ref=&quot;title1&quot;&gt;尚硅谷&lt;/h1&gt;</span><br><span class="line">    &lt;h2 ref=&quot;title2&quot;&gt;前端&lt;/h2&gt;</span><br><span class="line">    &lt;h3 ref=&quot;title3&quot;&gt;Vue&lt;/h3&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; ref=&quot;inpt&quot; /&gt; &lt;br /&gt;&lt;br /&gt;</span><br><span class="line">    &lt;button @click=&quot;showLog&quot;&gt;点我打印内容&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">let title1 = ref();</span><br><span class="line">let title2 = ref();</span><br><span class="line">let title3 = ref();</span><br><span class="line"></span><br><span class="line">function showLog() &#123;</span><br><span class="line">  // 通过id获取元素</span><br><span class="line">  const t1 = document.getElementById(&quot;title1&quot;);</span><br><span class="line">  // 打印内容</span><br><span class="line">  console.log((t1 as HTMLElement).innerText);</span><br><span class="line">  console.log((&lt;HTMLElement&gt;t1).innerText);</span><br><span class="line">  console.log(t1?.innerText);</span><br><span class="line"></span><br><span class="line">  /************************************/</span><br><span class="line"></span><br><span class="line">  // 通过ref获取元素</span><br><span class="line">  console.log(title1.value);</span><br><span class="line">  console.log(title2.value);</span><br><span class="line">  console.log(title3.value);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>用在组件标签上：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 父组件App.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Person ref=&quot;ren&quot; /&gt;</span><br><span class="line">  &lt;button @click=&quot;test&quot;&gt;测试&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">import Person from &quot;./components/Person.vue&quot;;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">let ren = ref();</span><br><span class="line"></span><br><span class="line">function test() &#123;</span><br><span class="line">  console.log(ren.value.name);</span><br><span class="line">  console.log(ren.value.age);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>总结来说 当我们将 ref 标记在组件上后 就能获得这个组件实例</p>
<p>但问题是这个组件实例中的元素内容并不是开放的 我们需要自己去定义我们在这个组件中需要什么</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 子组件Person.vue中要使用defineExpose暴露内容 --&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123; ref, defineExpose &#125; from &quot;vue&quot;;</span><br><span class="line">// 数据</span><br><span class="line">let name = ref(&quot;张三&quot;);</span><br><span class="line">let age = ref(18);</span><br><span class="line">/****************************/</span><br><span class="line">/****************************/</span><br><span class="line">// 使用defineExpose将组件中的数据交给外部</span><br><span class="line">defineExpose(&#123; name, age &#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>当我们进行完这个操作后就可以通过 ren 来调用其中的元素了</p>
<h2 id="【props】"><a href="#【props】" class="headerlink" title="【props】"></a>【props】</h2><blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个接口，限制每个Person对象的格式</span></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">PersonInter</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: string;</span><br><span class="line">  <span class="attr">name</span>: string;</span><br><span class="line">  <span class="attr">age</span>: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个自定义类型Persons</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">Persons</span> = <span class="title class_">Array</span>&lt;<span class="title class_">PersonInter</span>&gt;;</span><br></pre></td></tr></table></figure>

<p><code>App.vue</code>中代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Person :list=&quot;persons&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">import Person from &quot;./components/Person.vue&quot;;</span><br><span class="line">import &#123; reactive &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; type Persons &#125; from &quot;./types&quot;;</span><br><span class="line"></span><br><span class="line">let persons = reactive&lt;Persons&gt;([</span><br><span class="line">  &#123; id: &quot;e98219e12&quot;, name: &quot;张三&quot;, age: 18 &#125;,</span><br><span class="line">  &#123; id: &quot;e98219e13&quot;, name: &quot;李四&quot;, age: 19 &#125;,</span><br><span class="line">  &#123; id: &quot;e98219e14&quot;, name: &quot;王五&quot;, age: 20 &#125;,</span><br><span class="line">]);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>Person.vue</code>中代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;person&quot;&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li v-for=&quot;item in list&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">     &#123;&#123;item.name&#125;&#125;--&#123;&#123;item.age&#125;&#125;</span><br><span class="line">   &lt;/li&gt;</span><br><span class="line"> &lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123;defineProps&#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123;type PersonInter&#125; from &#x27;@/types&#x27;  //注意在这里引入类型规范的时候必须在前面加type关键字</span><br><span class="line"></span><br><span class="line">// 第一种写法：仅接收</span><br><span class="line">// const props = defineProps([&#x27;list&#x27;])</span><br><span class="line"></span><br><span class="line">// 第二种写法：接收+限制类型</span><br><span class="line">// defineProps&lt;&#123;list:Persons&#125;&gt;()</span><br><span class="line"></span><br><span class="line">// 第三种写法：接收+限制类型+指定默认值+限制必要性</span><br><span class="line">let props = withDefaults(defineProps&lt;&#123;list?:Persons&#125;&gt;(),&#123;</span><br><span class="line">  list:()=&gt;[&#123;id:&#x27;asdasg01&#x27;,name:&#x27;小猪佩奇&#x27;,age:18&#125;]</span><br><span class="line">&#125;)</span><br><span class="line">console.log(props)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<ul>
<li><p><strong>接口（Interface）</strong>：<code>PersonInter</code> 接口定义了 Person 对象的结构规范，强制要求包含<code>id</code>（string 类型）、<code>name</code>（string 类型）和<code>age</code>（number 类型）三个属性，确保数据格式一致性。</p>
</li>
<li><p><strong>类型别名（Type Alias）</strong>：<code>Persons</code> 类型通过 <code>Array&lt;PersonInter&gt;</code> 定义了一个由<code>PersonInter</code>对象组成的数组类型，简化了数组类型的使用。</p>
</li>
<li><p>代码中<code>Array&lt;PersonInter&gt;</code>使用了泛型语法，<code>Array</code>是 TypeScript 内置的泛型接口，<code>&lt;PersonInter&gt;</code>指定了数组元素的类型。</p>
</li>
<li><p>Vue 3 的<code>reactive</code>函数是泛型函数，<code>reactive&lt;Persons&gt;(...)</code>通过泛型参数指定了响应式对象的类型，确保只能存储符合<code>Persons</code>类型的数据。</p>
</li>
</ul>
<h2 id="【模板静态属性与动态属性】"><a href="#【模板静态属性与动态属性】" class="headerlink" title="【模板静态属性与动态属性】"></a>【模板静态属性与动态属性】</h2><p>Vue 在编译模板时，会根据是否有<code>v-bind</code>（或<code>:</code>）来区分处理方式：</p>
<ul>
<li>不带<code>:</code>的属性：直接作为静态字符串写入 DOM，不参与 Vue 的响应式系统。</li>
<li>带<code>:</code>的属性：将表达式解析为 JavaScript 代码，在组件渲染时动态计算值，并且会追踪表达式中依赖的响应式数据（如<code>ref</code>、<code>reactive</code>对象），当依赖变化时自动重新计算并更新属性值。</li>
</ul>
<p>简单来说就是 带冒号：的属性会去动态读取冒号后面的内容</p>
<h3 id="动态属性（v-bind）"><a href="#动态属性（v-bind）" class="headerlink" title="动态属性（v-bind）"></a>动态属性（<code>v-bind</code>）</h3><h4 id="（1）绑定基本表达式"><a href="#（1）绑定基本表达式" class="headerlink" title="（1）绑定基本表达式"></a>（1）绑定基本表达式</h4><p>可以直接使用 JavaScript 表达式（运算、三元判断等）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 运算 --&gt;</span><br><span class="line">  &lt;div :a=&quot;10 + 20&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;!-- 结果：a=&quot;30&quot; --&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 三元表达式 --&gt;</span><br><span class="line">  &lt;div :class=&quot;isActive ? &#x27;active&#x27; : &#x27;inactive&#x27;&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="（2）绑定响应式数据"><a href="#（2）绑定响应式数据" class="headerlink" title="（2）绑定响应式数据"></a>（2）绑定响应式数据</h4><p>结合 Vue 的响应式数据（<code>ref</code>&#x2F;<code>reactive</code>），实现动态更新：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div :title=&quot;message&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;!-- 当message变化时，title自动更新 --&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const message = ref(&quot; Hello, Vue3&quot;); // 响应式数据</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="（3）绑定对象-数组（用于-class-style）"><a href="#（3）绑定对象-数组（用于-class-style）" class="headerlink" title="（3）绑定对象 &#x2F; 数组（用于 class&#x2F;style）"></a>（3）绑定对象 &#x2F; 数组（用于 class&#x2F;style）</h4><p>动态绑定<code>class</code>或<code>style</code>时，可直接传入对象或数组：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;!-- 绑定class对象 --&gt;</span><br><span class="line">  &lt;div :class=&quot;&#123; active: isActive, &#x27;text-danger&#x27;: hasError &#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 绑定style数组 --&gt;</span><br><span class="line">  &lt;div :style=&quot;[baseStyles, activeStyles]&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="（4）绑定属性名（动态属性名）"><a href="#（4）绑定属性名（动态属性名）" class="headerlink" title="（4）绑定属性名（动态属性名）"></a>（4）绑定属性名（动态属性名）</h4><p>属性名也可以通过表达式动态生成（使用<code>[]</code>包裹）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div :[attrName]=&quot;value&quot;&gt;&lt;/div&gt;</span><br><span class="line">  &lt;!-- attrName是变量，动态决定属性名 --&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const attrName = ref(&quot;data-id&quot;); // 属性名动态为&quot;data-id&quot;</span><br><span class="line">const value = ref(&quot;123&quot;); // 属性值为&quot;123&quot;</span><br><span class="line">// 渲染结果：&lt;div data-id=&quot;123&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="（5）绑定布尔属性"><a href="#（5）绑定布尔属性" class="headerlink" title="（5）绑定布尔属性"></a>（5）绑定布尔属性</h4><p>对于布尔属性（如<code>disabled</code>、<code>checked</code>），值为<code>false</code>时会移除该属性：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button :disabled=&quot;isDisabled&quot;&gt;按钮&lt;/button&gt;</span><br><span class="line">  &lt;!-- isDisabled为true时：&lt;button disabled&gt;按钮&lt;/button&gt; --&gt;</span><br><span class="line">  &lt;!-- isDisabled为false时：&lt;button&gt;按钮&lt;/button&gt;（无disabled属性） --&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p><strong>注意事项</strong></p>
<ul>
<li><strong>表达式限制</strong>：<code>v-bind</code>后的表达式只能是<strong>单个表达式</strong>（不能是语句或流程控制，如<code>if</code>、<code>for</code>）。<br>错误示例：<code>&lt;div :a=&quot;if (flag) &#123; 1 &#125; else &#123; 2 &#125;&quot;&gt;&lt;/div&gt;</code>（应改用三元表达式）。</li>
<li><strong>避免副作用</strong>：表达式中不应包含副作用操作（如<code>++</code>、<code>--</code>或函数调用修改数据），可能导致渲染异常。</li>
<li><strong>简写规则</strong>：所有 HTML 属性都可以用<code>:</code>简写，包括自定义属性（如<code>data-*</code>）。</li>
</ul>
<p><strong>总结</strong></p>
<ul>
<li><code>a=&quot;xxx&quot;</code>：静态字符串，直接渲染，不参与动态计算。</li>
<li><code>:a=&quot;xxx&quot;</code>：动态绑定，<code>xxx</code>作为 JavaScript 表达式计算，支持响应式数据，会随依赖更新。</li>
</ul>
<h2 id="【props】-1"><a href="#【props】-1" class="headerlink" title="【props】"></a>【props】</h2><p><strong>为什么要使用 props 呢</strong></p>
<p>在 Vue 组件化开发中，<code>props</code>是实现<strong>组件间通信</strong>的核心机制之一，主要用于<strong>父组件向子组件传递数据</strong>，它的作用和必要性可以从以下几个方面理解：</p>
<ol>
<li><strong>实现组件间的数据传递</strong></li>
</ol>
<p>组件化开发的核心思想是 “拆分复杂 UI 为独立可复用的组件”，而组件之间往往需要共享数据。<code>props</code>就是 Vue 为这种场景设计的标准数据传递通道：</p>
<ul>
<li>父组件通过<code>props</code>向子组件传递数据（如示例中<code>App.vue</code>向<code>Person.vue</code>传递<code>persons</code>数组）。</li>
<li>子组件通过声明<code>props</code>接收数据，并在自身模板或逻辑中使用。</li>
</ul>
<p>没有<code>props</code>，子组件无法直接获取父组件的数据，组件间就会变成孤立的 “信息孤岛”。</p>
<ol start="2">
<li><strong>保证组件的独立性和复用性</strong></li>
</ol>
<p><code>props</code>的设计遵循了 “单向数据流” 原则：父组件传递数据，子组件只能使用数据，不能直接修改（若需修改，需通过事件通知父组件）。这种机制带来两个好处：</p>
<ul>
<li><strong>组件独立性</strong>：子组件的行为只依赖于接收的<code>props</code>，不直接操作父组件数据，避免组件间耦合过深。</li>
<li><strong>高复用性</strong>：同一个子组件（如<code>Person.vue</code>）可以通过接收不同的<code>props</code>数据，在不同场景下渲染不同内容（例如既可以展示 “张三、李四”，也可以展示 “小明、小红”）。</li>
</ul>
<ol start="3">
<li><strong>提供数据校验和类型约束</strong></li>
</ol>
<p>在 Vue 中，<code>props</code>支持对接收的数据进行校验（尤其是结合 TypeScript 时）：</p>
<ul>
<li>可以限制数据类型（如示例中<code>list</code>必须是<code>Persons</code>类型的数组）。</li>
<li>可以设置默认值（如示例中<code>withDefaults</code>指定的默认数组）。</li>
<li>可以指定是否为必填项（通过<code>?</code>标识可选）。</li>
</ul>
<p>这些校验能在开发阶段就暴露数据传递的错误（如父组件传了一个字符串而非数组），减少运行时 bug。</p>
<ol start="4">
<li><strong>明确组件的接口规范</strong></li>
</ol>
<p><code>props</code>相当于子组件对外暴露的 “数据接口”，其他开发者使用该组件时，只需查看<code>props</code>定义就知道：</p>
<ul>
<li>这个组件需要哪些数据才能工作？</li>
<li>每个数据的格式、类型是什么？</li>
<li>哪些数据是可选的（有默认值）？</li>
</ul>
<p>例如看到<code>Person.vue</code>的<code>props</code>定义，就知道它需要一个<code>list</code>数组，数组元素必须包含<code>id</code>、<code>name</code>、<code>age</code>，从而快速理解如何使用该组件。</p>
<p><strong>总结</strong></p>
<p><code>props</code>的核心价值是<strong>在保证组件独立性的前提下，安全、规范地实现父向子的数据传递</strong></p>
<blockquote>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个接口，限制每个Person对象的格式</span></span><br><span class="line"><span class="keyword">export</span> interface <span class="title class_">PersonInter</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: string;</span><br><span class="line">  <span class="attr">name</span>: string;</span><br><span class="line">  <span class="attr">age</span>: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个自定义类型Persons</span></span><br><span class="line"><span class="keyword">export</span> type <span class="title class_">Persons</span> = <span class="title class_">Array</span>&lt;<span class="title class_">PersonInter</span>&gt;;</span><br></pre></td></tr></table></figure>

<p><code>App.vue</code>中代码：（父组件）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Person :list=&quot;persons&quot; /&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">import Person from &quot;./components/Person.vue&quot;;</span><br><span class="line">import &#123; reactive &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; type Persons &#125; from &quot;./types&quot;;</span><br><span class="line"></span><br><span class="line">let persons = reactive&lt;Persons&gt;([</span><br><span class="line">  &#123; id: &quot;e98219e12&quot;, name: &quot;张三&quot;, age: 18 &#125;,</span><br><span class="line">  &#123; id: &quot;e98219e13&quot;, name: &quot;李四&quot;, age: 19 &#125;,</span><br><span class="line">  &#123; id: &quot;e98219e14&quot;, name: &quot;王五&quot;, age: 20 &#125;,</span><br><span class="line">]);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>Person.vue</code>中代码：（子组件）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div class=&quot;person&quot;&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li v-for=&quot;item in list&quot; :key=&quot;item.id&quot;&gt;</span><br><span class="line">     &#123;&#123;item.name&#125;&#125;--&#123;&#123;item.age&#125;&#125;</span><br><span class="line">   &lt;/li&gt;</span><br><span class="line"> &lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123;defineProps&#125; from &#x27;vue&#x27;</span><br><span class="line">import &#123;type PersonInter&#125; from &#x27;@/types&#x27;</span><br><span class="line"></span><br><span class="line">// 第一种写法：仅接收</span><br><span class="line">// const props = defineProps([&#x27;list&#x27;])</span><br><span class="line"></span><br><span class="line">// 第二种写法：接收+限制类型</span><br><span class="line">// defineProps&lt;&#123;list:Persons&#125;&gt;()</span><br><span class="line"></span><br><span class="line">// 第三种写法：接收+限制类型+指定默认值+限制必要性</span><br><span class="line"></span><br><span class="line">    //这里的问号的含义是不一定需要 没有传递的时候 就不会进行遍历</span><br><span class="line">let props = withDefaults(defineProps&lt;&#123;list?:Persons&#125;&gt;(),&#123;</span><br><span class="line">  list:()=&gt;[&#123;id:&#x27;asdasg01&#x27;,name:&#x27;小猪佩奇&#x27;,age:18&#125;]</span><br><span class="line">    //withDefaults的默认值必须是一个函数返回值 即这里我们写的这个箭头函数</span><br><span class="line"></span><br><span class="line">&#125;)</span><br><span class="line">console.log(props)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="【生命周期】"><a href="#【生命周期】" class="headerlink" title="【生命周期】"></a>【生命周期】</h2><p>直观地说 <strong>什么是生命周期</strong>呢？ 其实就是<strong>一个组件的一生</strong></p>
<p><strong>什么是挂载？</strong> 其实就是<strong>把组件显示在浏览器上</strong></p>
<p><strong>父子生命周期的核心规律</strong> 用一句话概括所有场景的共性： <strong>“父先开始，子先完成”</strong></p>
<ul>
<li>挂载 &#x2F; 更新 &#x2F; 卸载的 “准备阶段”（如 <code>onBeforeMount</code>&#x2F;<code>onBeforeUpdate</code>&#x2F;<code>onBeforeUnmount</code>）：父组件先执行；</li>
<li>挂载 &#x2F; 更新 &#x2F; 卸载的 “完成阶段”（如 <code>onMounted</code>&#x2F;<code>onUpdated</code>&#x2F;<code>onUnmounted</code>）：子组件先执行，父组件后执行。</li>
</ul>
<ul>
<li><p>概念：<code>Vue</code>组件实例在创建时要经历一系列的初始化步骤，在此过程中<code>Vue</code>会在合适的时机，调用特定的函数，从而让开发者有机会在特定阶段运行自己的代码，这些特定的函数统称为：生命周期钩子</p>
</li>
<li><p>规律：</p>
<blockquote>
<p>生命周期整体分为四个阶段，分别是：<strong>创建、挂载、更新、销毁</strong>，每个阶段都有两个钩子，一前一后。</p>
</blockquote>
</li>
<li><p><code>Vue2</code>的生命周期</p>
<blockquote>
<p>创建阶段：<code>beforeCreate</code>、<code>created</code></p>
<p>挂载阶段：<code>beforeMount</code>、<code>mounted</code></p>
<p>更新阶段：<code>beforeUpdate</code>、<code>updated</code></p>
<p>销毁阶段：<code>beforeDestroy</code>、<code>destroyed</code></p>
</blockquote>
</li>
<li><p><code>Vue3</code>的生命周期</p>
<blockquote>
<p>创建阶段：<code>setup</code></p>
<p>挂载阶段：<code>onBeforeMount</code>、<code>onMounted</code></p>
<p>更新阶段：<code>onBeforeUpdate</code>、<code>onUpdated</code></p>
<p>卸载阶段：<code>onBeforeUnmount</code>、<code>onUnmounted</code></p>
</blockquote>
</li>
<li><p>常用的钩子：<code>onMounted</code>(挂载完毕)、<code>onUpdated</code>(更新完毕)、<code>onBeforeUnmount</code>(卸载之前)</p>
</li>
<li><p>示例代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;person&quot;&gt;</span><br><span class="line">    &lt;h2&gt;当前求和为：&#123;&#123; sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeSum&quot;&gt;点我sum+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- vue3写法 --&gt;</span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;Person&quot;&gt;</span><br><span class="line">import &#123;</span><br><span class="line">  ref,</span><br><span class="line">  onBeforeMount,</span><br><span class="line">  onMounted,</span><br><span class="line">  onBeforeUpdate,</span><br><span class="line">  onUpdated,</span><br><span class="line">  onBeforeUnmount,</span><br><span class="line">  onUnmounted,</span><br><span class="line">&#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">// 数据</span><br><span class="line">let sum = ref(0);</span><br><span class="line">// 方法</span><br><span class="line">function changeSum() &#123;</span><br><span class="line">  sum.value += 1;</span><br><span class="line">&#125;</span><br><span class="line">console.log(&quot;setup&quot;);</span><br><span class="line">// 生命周期钩子</span><br><span class="line">onBeforeMount(() =&gt; &#123;</span><br><span class="line">  console.log(&quot;挂载之前&quot;);</span><br><span class="line">&#125;);</span><br><span class="line">onMounted(() =&gt; &#123;</span><br><span class="line">  console.log(&quot;挂载完毕&quot;);</span><br><span class="line">&#125;);</span><br><span class="line">onBeforeUpdate(() =&gt; &#123;</span><br><span class="line">  console.log(&quot;更新之前&quot;);</span><br><span class="line">&#125;);</span><br><span class="line">onUpdated(() =&gt; &#123;</span><br><span class="line">  console.log(&quot;更新完毕&quot;);</span><br><span class="line">&#125;);</span><br><span class="line">onBeforeUnmount(() =&gt; &#123;</span><br><span class="line">  console.log(&quot;卸载之前&quot;);</span><br><span class="line">&#125;);</span><br><span class="line">onUnmounted(() =&gt; &#123;</span><br><span class="line">  console.log(&quot;卸载完毕&quot;);</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="【自定义-hook】"><a href="#【自定义-hook】" class="headerlink" title="【自定义 hook】"></a>【自定义 hook】</h2><ul>
<li><p>什么是<code>hook</code>？</p>
<p>—— 本质是一个函数，把<code>setup</code>函数中使用的<code>Composition API</code>进行了封装，类似于<code>vue2.x</code>中的<code>mixin</code>。</p>
<p>更加详细地说 我们为什么要定义一个 hook 就是因为我们需要把不同的 api（不同的功能）分隔开 即某个功能的方法和数据我们定义在一个 hook 里 我们就可以复用这个 api 方便后续地维护 简洁地组合各个 api 其实这也是我们为什么说 vue3 使用的是组合式 api</p>
</li>
<li><p>自定义<code>hook</code>的优势：复用代码, 让<code>setup</code>中的逻辑更清楚易懂。</p>
</li>
</ul>
<p>在写自定义 hook 的时候的一些注意事项：</p>
<p>1.需要把整个函数给 export 出去</p>
<p>（export default 后面直接加值 不能给这个函数命名 如果直接写 export 就应该给函数命名）</p>
<p>2.最后在函数中我们需要把数据和方法给 return 出去 才能拿到这些方法</p>
<p>3.在 hook 里我们也可以写关于这个功能的生命周期钩子函数</p>
<p>示例代码：</p>
<ul>
<li><p><code>useSum.ts</code>中内容如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, onMounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="title function_">ref</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">increment</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    sum.<span class="property">value</span> += <span class="number">1</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">decrement</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    sum.<span class="property">value</span> -= <span class="number">1</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">increment</span>();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//向外部暴露数据</span></span><br><span class="line">  <span class="keyword">return</span> &#123; sum, increment, decrement &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>useDog.ts</code>中内容如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;reactive,onMounted&#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios,&#123;<span class="title class_">AxiosError</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">let</span> dogList = reactive&lt;string[]&gt;([])</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 方法</span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getDog</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">// 发请求</span></span><br><span class="line">      <span class="keyword">let</span> &#123;data&#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&#x27;https://dog.ceo/api/breed/pembroke/images/random&#x27;</span>)</span><br><span class="line">      <span class="comment">// 维护数据</span></span><br><span class="line">      dogList.<span class="title function_">push</span>(data.<span class="property">message</span>)</span><br><span class="line">    &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">      <span class="comment">// 处理错误</span></span><br><span class="line">      <span class="keyword">const</span> err = &lt;<span class="title class_">AxiosError</span>&gt;error</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(err.<span class="property">message</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 挂载钩子</span></span><br><span class="line">  <span class="title function_">onMounted</span>(<span class="function">()=&gt;</span>&#123;</span><br><span class="line">    <span class="title function_">getDog</span>()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">//向外部暴露数据</span></span><br><span class="line">  <span class="keyword">return</span> &#123;dogList,getDog&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>组件中具体使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;当前求和为：&#123;&#123; sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;button @click=&quot;increment&quot;&gt;点我+1&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;decrement&quot;&gt;点我-1&lt;/button&gt;</span><br><span class="line">  &lt;hr /&gt;</span><br><span class="line">  &lt;img</span><br><span class="line">    v-for=&quot;(u, index) in dogList.urlList&quot;</span><br><span class="line">    :key=&quot;index&quot;</span><br><span class="line">    :src=&quot;(u as string)&quot;</span><br><span class="line">  /&gt;</span><br><span class="line">  &lt;span v-show=&quot;dogList.isLoading&quot;&gt;加载中......&lt;/span&gt;&lt;br /&gt;</span><br><span class="line">  &lt;button @click=&quot;getDog&quot;&gt;再来一只狗&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; defineComponent &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">export default defineComponent(&#123;</span><br><span class="line">  name: &quot;App&quot;,</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import useSum from &quot;./hooks/useSum&quot;;</span><br><span class="line">import useDog from &quot;./hooks/useDog&quot;;</span><br><span class="line"></span><br><span class="line">let &#123; sum, increment, decrement &#125; = useSum();</span><br><span class="line">let &#123; dogList, getDog &#125; = useDog();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="【路由】"><a href="#【路由】" class="headerlink" title="【路由】"></a>【路由】</h2><p>通俗地说<strong>什么是路由</strong></p>
<p>路由其实就是<strong>一组 key-value 的对应关系</strong></p>
<p>多个路由 需要经过<strong>路由器的管理</strong></p>
<p>那么进一步地 如果我们想要实现路由的基本实现 需要准备哪些东西呢？</p>
<p>1.一个基本的<strong>导航区</strong>（用于点击跳转路由） 一个基本的<strong>展示区</strong>（用于显示路由对应组件内容）</p>
<p>2.创建<strong>路由器</strong></p>
<p>3.制定路由的<strong>具体规则</strong>（什么<strong>路径 path</strong>？ 该路径对应什么<strong>组件 component</strong>？）</p>
<p>4.完成我们对应需要的这些<strong>组件</strong>（**???.vue**)</p>
<h3 id="【路由切换的基本实现】"><a href="#【路由切换的基本实现】" class="headerlink" title="【路由切换的基本实现】"></a>【路由切换的基本实现】</h3><ul>
<li><code>Vue3</code>中要使用<code>vue-router</code>的最新版本，目前是<code>4</code>版本。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vue-router</span><br></pre></td></tr></table></figure>

<ul>
<li>我们想要实现对多个路由的切换首先需要实现路由的管理 那么像上面说的路由的管理需要路由器 router 所以首先我们需要创建一个 router 出来</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>; <span class="comment">// 引入</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">Home</span> <span class="keyword">from</span> <span class="string">&quot;@/pages/Home.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">News</span> <span class="keyword">from</span> <span class="string">&quot;@/pages/News.vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">About</span> <span class="keyword">from</span> <span class="string">&quot;@/pages/About.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="comment">// 创建路由器</span></span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(), <span class="comment">// 路由器工作模式（后面会写）</span></span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    <span class="comment">// 一组route路由</span></span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>, <span class="comment">// 路由路径 （会显示在地址后缀以及routerlink）</span></span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Home</span>, <span class="comment">// 一个route必须对应一个组件</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">About</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router; <span class="comment">// router路由器必须被暴露出去</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p><code>main.ts</code>代码如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">&quot;./router/index&quot;</span>;</span><br><span class="line">app.<span class="title function_">use</span>(router); <span class="comment">// router的挂载</span></span><br><span class="line"></span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p>这个时候 我们让路由和组件一一对应了 相当于我们已经将组件引导到了正确的门前 但问题是 此时这个门并没有打开 我们在展示区并不能看到其内容 这是因为我们 <strong>需要设置路由出口</strong> <strong>RouterView</strong></p>
</li>
<li><pre><code class="html">&lt;!-- 展示区 --&gt;
&lt;div class=&quot;main-content&quot;&gt;
  &lt;RouterView&gt;&lt;/RouterView&gt;
&lt;/div&gt;

&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;
  import &#123; RouterView &#125; from &quot;vue-router&quot;;
&lt;/script&gt;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  此时我们就可以通过改变地址后的 path （例如/home）来在显示区显示对应组件内容</span><br><span class="line"></span><br><span class="line">* 此时我们还想要实现一个点击跳转的效果 即点击其导航标题就能跳转到对应的组件内容 显然我们需要一个像 a 超链接一样的东西 本质是实现 **路由的跳转（进一步地说 应该是 path 的跳转）** 为了实现这个功能 我们用到 vue-router 中自带的 **RouterLink** 其标签是 **to** 后面是跳转到的 path</span><br><span class="line"></span><br><span class="line">* ```html</span><br><span class="line">  &lt;div class=&quot;navigate&quot;&gt;</span><br><span class="line">    &lt;RouterLink to=&quot;/home&quot; active-class=&quot;active&quot;&gt;首页&lt;/RouterLink&gt;</span><br><span class="line">    &lt;RouterLink to=&quot;/news&quot; active-class=&quot;active&quot;&gt;新闻&lt;/RouterLink&gt;</span><br><span class="line">    &lt;RouterLink to=&quot;/about&quot; active-class=&quot;active&quot;&gt;关于&lt;/RouterLink&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">  &lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">    import &#123; RouterLink &#125; from &quot;vue-router&quot;;</span><br><span class="line">  &lt;/script&gt;</span><br></pre></td></tr></table></figure>

这样我们就可以实现点击导航实现路由的跳转啦
</code></pre>
</li>
<li><p><code>App.vue</code>代码如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h2 class=&quot;title&quot;&gt;Vue路由测试&lt;/h2&gt;</span><br><span class="line">    &lt;!-- 导航区 --&gt;</span><br><span class="line">    &lt;div class=&quot;navigate&quot;&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/home&quot; active-class=&quot;active&quot;&gt;首页&lt;/RouterLink&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/news&quot; active-class=&quot;active&quot;&gt;新闻&lt;/RouterLink&gt;</span><br><span class="line">      &lt;RouterLink to=&quot;/about&quot; active-class=&quot;active&quot;&gt;关于&lt;/RouterLink&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!-- 展示区 --&gt;</span><br><span class="line">    &lt;div class=&quot;main-content&quot;&gt;</span><br><span class="line">      &lt;RouterView&gt;&lt;/RouterView&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script lang=&quot;ts&quot; setup name=&quot;App&quot;&gt;</span><br><span class="line">import &#123; RouterLink, RouterView &#125; from &quot;vue-router&quot;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="【两个注意点】"><a href="#【两个注意点】" class="headerlink" title="【两个注意点】"></a>【两个注意点】</h3><blockquote>
<p>1.路由组件通常存放在<code>pages</code> 或 <code>views</code>文件夹，一般组件通常存放在<code>components</code>文件夹。</p>
<p><strong>如何区分一般组件和路由组件呢？</strong></p>
<p><strong>路由组件</strong>：按照<strong>路由的规则</strong>渲染出来的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">routes:[</span><br><span class="line">	&#123;path:<span class="string">&#x27;/demo&#x27;</span>,component:Demo&#125;</span><br><span class="line">]</span><br><span class="line"><span class="comment">//组件为Demo.vue</span></span><br></pre></td></tr></table></figure>

<p>对于这个组件 我们一般需要用路由出口 orRouterlink 来渲染这个组件 像这样的组件就称之为路由组件</p>
<p>路由组件我们放在 pages 或者 vies 文件夹中 为了实现一个页面中的一些小组件 我们会在每一个 pages 下面再单独写一个 components 文件夹用于存放页面内一般组件</p>
<p><strong>一般组件</strong>：亲手写标签渲染出来的组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//假设我们现在有一个组件为Header.vue 如果像现在这么写的话 这个组件就是一般组件</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Header form &#x27;./components/Header.vue&#x27;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;Header /&gt;</span><br><span class="line">  &lt;template&gt;&lt;/template&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>像这样 我们需要自己写标签渲染出来的组件我们称之为一般组件</p>
<p>一般组件我们放在 components 文件夹中</p>
<p>一般在我们的实际开发中 我们一般会在路由组件下面写一般组件 （也就是拆组件）</p>
<p>2.通过点击导航，视觉效果上“消失” 了的路由组件，默认是被<strong>卸载</strong>掉的，需要的时候再去<strong>挂载</strong>。</p>
</blockquote>
<h3 id="【路由器工作模式】"><a href="#【路由器工作模式】" class="headerlink" title="【路由器工作模式】"></a>【路由器工作模式】</h3><ol>
<li><p><code>history</code>模式</p>
<blockquote>
<p>优点：<code>URL</code>更加美观，不带有<code>#</code>，更接近传统的网站<code>URL</code>。</p>
<p>缺点：后期项目上线，需要服务端配合处理路径问题，否则刷新会有<code>404</code>错误。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(), <span class="comment">//history模式</span></span><br><span class="line">  <span class="comment">/******/</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p><code>hash</code>模式</p>
<blockquote>
<p>优点：兼容性更好，因为不需要服务器端处理路径。</p>
<p>缺点：<code>URL</code>带有<code>#</code>不太美观，且在<code>SEO</code>优化方面相对较差。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHashHistory</span>(), <span class="comment">//hash模式</span></span><br><span class="line">  <span class="comment">/******/</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></blockquote>
</li>
</ol>
<h3 id="【to-的两种写法】"><a href="#【to-的两种写法】" class="headerlink" title="【to 的两种写法】"></a>【to 的两种写法】</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 第一种：to的字符串写法 --&gt;</span><br><span class="line">&lt;router-link active-class=&quot;active&quot; to=&quot;/home&quot;&gt;主页&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 第二种：to的对象写法 --&gt;</span><br><span class="line">&lt;router-link active-class=&quot;active&quot; :to=&quot;&#123; path: &#x27;/home&#x27; &#125;&quot;&gt;Home&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<h3 id="【命名路由】"><a href="#【命名路由】" class="headerlink" title="【命名路由】"></a>【命名路由】</h3><p>作用：可以简化路由跳转及传参（后面就讲）</p>
<p>注意这里的 name 不一定要和 path 或者 component 的名字一样 这个 name 是用来自定义的 主要是便于我们后期的路由跳转问题</p>
<p>给路由规则命名：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">routes</span>: [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;zhuye&quot;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">Home</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;xinwen&quot;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/news&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">News</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;guanyu&quot;</span>,</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">About</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>

<p>跳转路由：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--简化前：需要写完整的路径（to的字符串写法） --&gt;</span><br><span class="line">&lt;router-link to=&quot;/news/detail&quot;&gt;跳转&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--简化后：直接通过名字跳转（to的对象写法配合name属性） 注意这种写法是to的对象写法 --&gt;</span><br><span class="line">&lt;router-link :to=&quot;&#123; name: &#x27;guanyu&#x27; &#125;&quot;&gt;跳转&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>

<h3 id="【嵌套路由】"><a href="#【嵌套路由】" class="headerlink" title="【嵌套路由】"></a>【嵌套路由】</h3><ol>
<li><p>编写<code>News</code>的子路由：<code>Detail.vue</code></p>
</li>
<li><p>配置路由规则，使用<code>children</code>配置项： 需要注意 子组件中的 path 不用写 &#x2F;</p>
<p>对于子路由的最简单的一种应用场景就是比如说我们需要在一个页面 article 里跳转到这个 article 的详情页 detail</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">  <span class="attr">routes</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;zhuye&quot;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">Home</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;xinwen&quot;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/news&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">News</span>,</span><br><span class="line">      <span class="attr">children</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;xiang&quot;</span>,</span><br><span class="line">          <span class="attr">path</span>: <span class="string">&quot;detail&quot;</span>,</span><br><span class="line">          <span class="attr">component</span>: <span class="title class_">Detail</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;guanyu&quot;</span>,</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">      <span class="attr">component</span>: <span class="title class_">About</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>
</li>
<li><p>跳转路由（记得要加完整路径）：（注意这里对象跳转的话使用名称也是可以实现的）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/news/detail&quot;&gt;xxxx&lt;/router-link&gt;</span><br><span class="line">&lt;!-- 或 --&gt;</span><br><span class="line">&lt;router-link :to=&quot;&#123; path: &#x27;/news/detail&#x27; &#125;&quot;&gt;xxxx&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>记得去<code>Home</code>组件中预留一个<code>&lt;router-view&gt;</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;news&quot;&gt;</span><br><span class="line">    &lt;nav class=&quot;news-list&quot;&gt;</span><br><span class="line">      &lt;RouterLink</span><br><span class="line">        v-for=&quot;news in newsList&quot;</span><br><span class="line">        :key=&quot;news.id&quot;</span><br><span class="line">        :to=&quot;&#123; path: &#x27;/news/detail&#x27; &#125;&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;&#123; news.name &#125;&#125;</span><br><span class="line">      &lt;/RouterLink&gt;</span><br><span class="line">    &lt;/nav&gt;</span><br><span class="line">    &lt;div class=&quot;news-detail&quot;&gt;</span><br><span class="line">      &lt;RouterView /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="【路由传参·query-参数】"><a href="#【路由传参·query-参数】" class="headerlink" title="【路由传参·query 参数】"></a>【路由传参·query 参数】</h3><p>query 参数可以用来解决什么问题呢</p>
<p>我们还是以之前的 article 和 detail 为例 显然我们想要实现的效果是我们希望一个 detail 能够显示出来对应文章的细节 想要实现效果我们至少需要一个响应式的东西 在这种情况下我们使用 query 接受参数 通过接受的参数我们就可以把这个响应式的东西放进我们的 detail 里</p>
<ol>
<li><p>传递参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 跳转并携带query参数（to的字符串写法） --&gt;</span><br><span class="line">&lt;router-link to=&quot;/news/detail?a=1&amp;b=2&amp;content=欢迎你&quot;&gt;</span><br><span class="line">	跳转</span><br><span class="line">&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 跳转并携带query参数（to的对象写法） --&gt;</span><br><span class="line">&lt;li v-for=&quot;news in newsList&quot; :key=&quot;news.id&quot;&gt;</span><br><span class="line">    &lt;RouterLink </span><br><span class="line">  :to=&quot;&#123;</span><br><span class="line">    //name:&#x27;xiang&#x27;, //用name也可以跳转</span><br><span class="line">    path:&#x27;/news/detail&#x27;,</span><br><span class="line">      //在v-for里 我们可以直接调用这个views</span><br><span class="line">    query:&#123;</span><br><span class="line">      id:news.id, </span><br><span class="line">      title:news.title,</span><br><span class="line">      content:news.content</span><br><span class="line">    &#125; // 这里就是我们传入的三个参数</span><br><span class="line">  &#125;&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &#123;&#123;news.title&#125;&#125;</span><br><span class="line">&lt;/RouterLink&gt;</span><br><span class="line">&lt;/li&gt;</span><br><span class="line">//当然我们需要在newsList里面写好这些数据</span><br><span class="line">这里就省去了（实际开发中是后端给的）</span><br></pre></td></tr></table></figure>
</li>
<li><p>接收参数：</p>
<p>我们用 route.query.具体参数 的方式来接受这些参数 我们在下面简单地写一个</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li&gt;编号：&#123;&#123; route.query.id &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;标题：&#123;&#123; route.query.title &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;内容：&#123;&#123; route.query.content &#125;&#125;&lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">import &#123; useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">const route = useRoute();</span><br><span class="line">// 打印query参数</span><br><span class="line">//console.log(route.query)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>这样我们就可以实现 detail 和文章的一一对应了！</p>
<h3 id="【路由传参·params-参数】"><a href="#【路由传参·params-参数】" class="headerlink" title="【路由传参·params 参数】"></a>【路由传参·params 参数】</h3><p>params 参数实现的功能基本上跟 query 是一致的 这里就不再写了 主要是写法不一样</p>
<ol>
<li><p>定义路由</p>
<p>在我们使用 params 参数定义路由的时候必须用：来占位所需的参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 路由配置文件（如router/index.js）</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">User</span> <span class="keyword">from</span> <span class="string">&quot;../views/User.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&quot;/user/:id/:title/:content&quot;</span>, <span class="comment">// 定义params参数 必须提前占位</span></span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;User&quot;</span>,</span><br><span class="line">    <span class="attr">component</span>: <span class="title class_">User</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>(&#123;</span><br><span class="line">  <span class="attr">history</span>: <span class="title function_">createWebHistory</span>(),</span><br><span class="line">  routes,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router;</span><br></pre></td></tr></table></figure>
</li>
<li><p>传递参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 跳转并携带params参数（to的字符串写法） --&gt;</span><br><span class="line">&lt;RouterLink</span><br><span class="line">  :to=&quot;`/news/detail/001/新闻001/内容001`&quot;</span><br><span class="line">&gt;&#123;&#123;news.title&#125;&#125;&lt;/RouterLink&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 跳转并携带params参数（to的对象写法） --&gt;</span><br><span class="line">&lt;RouterLink</span><br><span class="line">  :to=&quot;&#123;</span><br><span class="line">    name: &#x27;xiang&#x27;, //用name跳转</span><br><span class="line">    params: &#123;</span><br><span class="line">      id: news.id,</span><br><span class="line">      title: news.title,</span><br><span class="line">      content: news.title,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &#123;&#123;news.title&#125;&#125;</span><br><span class="line">&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>接收参数：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>编号：&#123;&#123;route.params.id&#125;&#125; <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>标题：&#123;&#123;route.params.title&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>内容：&#123;&#123;route.params.content&#125;&#125; <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">setup</span> <span class="attr">lang</span> = <span class="string">&quot;ts&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">import</span> &#123;useRoute&#125; <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">const</span> route = <span class="title function_">useRoute</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li>
</ol>
<blockquote>
<ul>
<li><p><strong>必须配合路由的 name 属性使用</strong>：传递<code>params</code>时，<code>to</code>对象中必须使用<code>name</code>来指定路由，不能使用<code>path</code></p>
</li>
<li><p><strong>显示在 URL 中</strong>：参数会作为 URL 的一部分，例如<code>/user/123/张三</code></p>
</li>
<li><p><strong>刷新页面参数不丢失</strong>：因为参数存储在 URL 中，刷新页面后仍然可以获取</p>
</li>
<li><p><strong>必填性</strong>：如果路由定义了<code>params</code>参数，导航时必须传递，否则会导致路由匹配失败</p>
<p>如果我们希望 params 参数是可传可不传的 直接在定义路由的时候再参数后面加？即可</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 路由配置</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&#x27;/user/:id/:name?&#x27;</span>, <span class="comment">// name参数可选</span></span><br><span class="line">  <span class="attr">name</span>: <span class="string">&#x27;User&#x27;</span>,</span><br><span class="line">  <span class="attr">component</span>: <span class="title class_">User</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>没有默认值</strong>：不能像<code>query</code>参数那样设置默认值，需要在组件中处理未传递的情况</p>
</li>
</ul>
</blockquote>
<h3 id="【路由的-props-配置】"><a href="#【路由的-props-配置】" class="headerlink" title="【路由的 props 配置】"></a>【路由的 props 配置】</h3><p>作用：让路由组件更方便的收到参数（可以将路由参数作为<code>props</code>传给组件） 也就是能简化 detail 部分的写法</p>
<p>我们知道一般组件也是有 props 参数的 也就是该组件接受的数据</p>
<p>其实路由的 props 配置跟组件的 props 有很大关系</p>
<p>简单来说 当我们设置了 props 后 会把这些参数作为组件的 props</p>
<p>以布尔值写法为例</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&#x27;xiang&#x27;</span>,</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;detail/:id/:title/:content&#x27;</span>,</span><br><span class="line">    <span class="attr">component</span>:<span class="title class_">Detail</span>,</span><br><span class="line">    <span class="attr">props</span>:<span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>相当于我们把 Detail 组件变成了一个一般组件 然后我们把 path 中占位的 id title content（即收到的 params 参数）写在一般组件中作为一般组件的 props</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">//等价于 <span class="tag">&lt;<span class="name">Detail</span> <span class="attr">id</span>=<span class="string">&quot;??&quot;</span> <span class="attr">title</span>=<span class="string">&quot;??&quot;</span> <span class="attr">content</span>=<span class="string">&quot;??&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<p>那么对应的我们需要在接受参数的地方定义一下我们需要的 props</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li&gt;编号：&#123;&#123; id &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;标题：&#123;&#123; title &#125;&#125;&lt;/li&gt;</span><br><span class="line">    &lt;li&gt;内容：&#123;&#123; content &#125;&#125;&lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot;&gt;</span><br><span class="line">defineProps([&quot;id&quot;, &quot;title&quot;, &quot;content&quot;]);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>显然这样我们就做了极大的简化</p>
<p>这里</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	<span class="attr">name</span>:<span class="string">&#x27;xiang&#x27;</span>,</span><br><span class="line">	<span class="attr">path</span>:<span class="string">&#x27;detail/:id/:title/:content&#x27;</span>,</span><br><span class="line">	<span class="attr">component</span>:<span class="title class_">Detail</span>,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// props的对象写法，作用：把对象中的每一组key-value作为props传给Detail组件 这种props是写死的 很少使用</span></span><br><span class="line">  <span class="comment">// props:&#123;a:1,b:2,c:3&#125;,</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// props的布尔值写法，作用：把收到了每一组params参数，作为props传给Detail组件 注意这种写法只能传递params参数（提前占位）</span></span><br><span class="line">  <span class="comment">// props:true</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// props的函数写法，作用：把返回的对象中每一组key-value作为props传给Detail组件 可以用于传递query参数</span></span><br><span class="line">  <span class="title function_">props</span>(<span class="params">route</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> route.<span class="property">query</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="【-replace-属性】"><a href="#【-replace-属性】" class="headerlink" title="【 replace 属性】"></a>【 replace 属性】</h3><ol>
<li><p>作用：控制路由跳转时操作浏览器历史记录的模式。</p>
</li>
<li><p>浏览器的历史记录有两种写入方式：分别为<code>push</code>和<code>replace</code>：</p>
<ul>
<li><code>push</code>是追加历史记录（默认值）。 （就是这些历史记录 or 页面都是放在栈里的 可以前进后退）</li>
<li><code>replace</code>是替换当前记录 。 （直接替换掉当前内容 不支持前进后退）</li>
</ul>
</li>
<li><p>开启<code>replace</code>模式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;RouterLink replace .......&gt;News&lt;/RouterLink&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="【编程式导航】"><a href="#【编程式导航】" class="headerlink" title="【编程式导航】"></a>【编程式导航】</h3><p>什么是编程式导航呢 简单来说就是 <strong>脱离<Routerlink> 通过 JavaScript 代码实现路由跳转</strong></p>
<p>什么时候会用编程式导航呢 一般地，当路由跳转需要逻辑（如完成某些操作才跳转路由）的时候我们需要使用编程式导航</p>
<p>Vue3 中实现编程式导航主要依赖 <code>vue-router</code> 提供的 <code>useRouter</code> 组合式 API，以下是其核心用法：</p>
<p><strong>基本用法</strong></p>
<p>首先需要导入并创建路由实例：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useRouter &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">useRouter</span>();</span><br></pre></td></tr></table></figure>

<p>我们会使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导航到特定地址</span></span><br><span class="line">router.<span class="title function_">push</span>(&#123; 地址 &#125;);</span><br><span class="line">router.<span class="title function_">replace</span>(&#123; 地址 &#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//在历史记录中前进或后退指定步数</span></span><br><span class="line">rouer.<span class="title function_">go</span>(<span class="number">1</span>); <span class="comment">// 前进一页</span></span><br></pre></td></tr></table></figure>

<p>这里的 push 和 replace 就对应着上面介绍的两种浏览器历史记录写入方式</p>
<p>push 或者 replace 后面地址的写法 <strong>跟 routerlink 中 to 参数的写法一模一样</strong></p>
<h3 id="【重定向】"><a href="#【重定向】" class="headerlink" title="【重定向】"></a>【重定向】</h3><ol>
<li><p>作用：将特定的路径，重新定向到已有路由。</p>
</li>
<li><p>具体编码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">    <span class="attr">redirect</span>:<span class="string">&#x27;/about&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<p>可以用来处理页面初始地址的问题</p>
<h2 id="【pinia】"><a href="#【pinia】" class="headerlink" title="【pinia】"></a>【pinia】</h2><p>pinia 用于集中式状态（数据）管理</p>
<p>我们需要把一些需要共享的数据交给集中式状态管理</p>
<h3 id="【搭建-pinia-环境】"><a href="#【搭建-pinia-环境】" class="headerlink" title="【搭建 pinia 环境】"></a>【搭建 pinia 环境】</h3><p>第一步：<code>npm install pinia</code></p>
<p>第二步：操作<code>src/main.ts</code></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&quot;./App.vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 引入createPinia，用于创建pinia */</span></span><br><span class="line"><span class="keyword">import</span> &#123; createPinia &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 创建pinia */</span></span><br><span class="line"><span class="keyword">const</span> pinia = <span class="title function_">createPinia</span>();</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">createApp</span>(<span class="title class_">App</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用插件 */</span> &#123;</span><br><span class="line">&#125;</span><br><span class="line">app.<span class="title function_">use</span>(pinia);</span><br><span class="line">app.<span class="title function_">mount</span>(<span class="string">&quot;#app&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>此时开发者工具中已经有了<code>pinia</code>选项</p>
<img src="Vue3.assets/1684309952481-c67f67f9-d1a3-4d69-8bd6-2b381e003f31.png" style="zoom:80%;border:1px solid black;border-radius:10px" />

<h3 id="【存储-读取数据】"><a href="#【存储-读取数据】" class="headerlink" title="【存储+读取数据】"></a>【存储+读取数据】</h3><ol>
<li><p><code>Store</code>是一个保存：<strong>状态</strong>、<strong>业务逻辑</strong> 的实体，每个组件都可以<strong>读取</strong>、<strong>写入</strong>它。 其实它就相当于 pinia 的具体实现部分 我们需要在 src 目录下创建一个 store 文件夹用于存放各个组件的 pinia 从另一个角度说 由于我们把这些数据放在了 store 里 那么我们就可以在其他组件中复用这些数据 这也就是我们所说的存放共享数据</p>
</li>
<li><p>它有三个概念：<code>state</code>、<code>getter</code>、<code>action</code>，相当于组件中的： <code>data</code>、 <code>computed</code> 和 <code>methods</code>。</p>
</li>
<li><p>具体编码：<code>src/store/count.ts</code></p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入defineStore用于创建store</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义并暴露一个store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&quot;count&quot;</span>, &#123;</span><br><span class="line">  <span class="comment">// 动作</span></span><br><span class="line">  <span class="attr">actions</span>: &#123;&#125;,</span><br><span class="line">  <span class="comment">// 状态 必须是一个函数然后返回某些值</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>: <span class="number">6</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 计算</span></span><br><span class="line">  <span class="attr">getters</span>: &#123;&#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>具体编码：<code>src/store/talk.ts</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入defineStore用于创建store</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义并暴露一个store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useTalkStore = <span class="title function_">defineStore</span>(<span class="string">&quot;talk&quot;</span>, &#123;</span><br><span class="line">  <span class="comment">// 动作</span></span><br><span class="line">  <span class="attr">actions</span>: &#123;&#125;,</span><br><span class="line">  <span class="comment">// 状态</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">talkList</span>: [</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="string">&quot;yuysada01&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;你今天有点怪，哪里怪？怪好看的！&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="string">&quot;yuysada02&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;草莓、蓝莓、蔓越莓，你想我了没？&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="string">&quot;yuysada03&quot;</span>, <span class="attr">content</span>: <span class="string">&quot;心里给你留了一块地，我的死心塌地&quot;</span> &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 计算</span></span><br><span class="line">  <span class="attr">getters</span>: &#123;&#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>组件中使用<code>state</code>中的数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;当前求和为：&#123;&#123; sumStore.sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">// 引入对应的useXxxxxStore</span><br><span class="line">import &#123; useSumStore &#125; from &quot;@/store/sum&quot;;</span><br><span class="line"></span><br><span class="line">// 调用useXxxxxStore得到对应的store</span><br><span class="line">const sumStore = useSumStore();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">    &lt;li v-for=&quot;talk in talkStore.talkList&quot; :key=&quot;talk.id&quot;&gt;</span><br><span class="line">      &#123;&#123; talk.content &#125;&#125;</span><br><span class="line">    &lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line">import &#123; useTalkStore &#125; from &quot;@/store/talk&quot;;</span><br><span class="line"></span><br><span class="line">const talkStore = useTalkStore();</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>这里还有一个小小的注意点是 当我们在组件中使用这些数据的时候 虽然像 sum 这样的数据是 ref 但是我们并不需要.value 因为它是放在响应式对象之中的 会自动拆包不需要额外.value 了</p>
<p>总结：响应式对象中的响应式数据会被自动拆包 间接地使用都不要加.value</p>
<p>我们在这里写一小段代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> x = <span class="title function_">ref</span>(<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ovj = <span class="title function_">reactive</span>(&#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="attr">b</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="attr">c</span>: <span class="title function_">ref</span>(<span class="number">3</span>),</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">a</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">b</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj.<span class="property">c</span>); <span class="comment">// 在reactive中这个ref已经被拆包了</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(x.<span class="property">value</span>); <span class="comment">// 直接定义的ref当我们想获得值的时候当然需要.value</span></span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>【修改数据的三种方式】</strong></p>
<ol>
<li><p>第一种修改方式，直接修改</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">countStore.<span class="property">sum</span> = <span class="number">666</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>第二种修改方式：批量修改</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">countStore.$patch(&#123;</span><br><span class="line">  <span class="attr">sum</span>: <span class="number">999</span>,</span><br><span class="line">  <span class="attr">school</span>: <span class="string">&quot;atguigu&quot;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>第三种修改方式：借助<code>action</code>修改（<code>action</code>中可以编写一些业务逻辑）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&quot;count&quot;</span>, &#123;</span><br><span class="line">  <span class="comment">/*************/</span></span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="comment">//加</span></span><br><span class="line">    <span class="title function_">increment</span>(<span class="params">value: number</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">sum</span> &lt; <span class="number">10</span>) &#123;</span><br><span class="line">        <span class="comment">//操作countStore中的sum 注意 这里的this指向的是当前的store</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sum</span> += value;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//减</span></span><br><span class="line">    <span class="title function_">decrement</span>(<span class="params">value: number</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">sum</span> &gt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">sum</span> -= value;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/*************/</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>组件中调用<code>action</code>即可</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用countStore</span></span><br><span class="line"><span class="keyword">const</span> countStore = <span class="title function_">useCountStore</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用对应action</span></span><br><span class="line">countStore.<span class="title function_">incrementOdd</span>(n.<span class="property">value</span>);</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="【storeToRefs】"><a href="#【storeToRefs】" class="headerlink" title="【storeToRefs】"></a>【storeToRefs】</h3><ul>
<li>借助<code>storeToRefs</code>将<code>store</code>中的数据转为<code>ref</code>对象，方便在模板中使用。</li>
<li>注意：<code>pinia</code>提供的<code>storeToRefs</code>只会将数据做转换，而<code>Vue</code>的<code>toRefs</code>会将<code>store</code>中所有东西都转换成 ref（显然是我们不想看到的）。</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;count&quot;&gt;</span><br><span class="line">    &lt;h2&gt;当前求和为：&#123;&#123; sum &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Count&quot;&gt;</span><br><span class="line">import &#123; useCountStore &#125; from &quot;@/store/count&quot;;</span><br><span class="line">/* 引入storeToRefs */</span><br><span class="line">import &#123; storeToRefs &#125; from &quot;pinia&quot;;</span><br><span class="line"></span><br><span class="line">/* 得到countStore */</span><br><span class="line">const countStore = useCountStore();</span><br><span class="line">/* 使用storeToRefs转换countStore，随后解构 */</span><br><span class="line">const &#123; sum &#125; = storeToRefs(countStore);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="【getters】"><a href="#【getters】" class="headerlink" title="【getters】"></a>【getters】</h3><ol>
<li><p>概念：当<code>state</code>中的数据，需要经过处理后再使用时，可以使用<code>getters</code>配置。</p>
</li>
<li><p>追加<code>getters</code>配置。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入defineStore用于创建store</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义并暴露一个store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useCountStore = <span class="title function_">defineStore</span>(<span class="string">&quot;count&quot;</span>, &#123;</span><br><span class="line">  <span class="comment">// 动作</span></span><br><span class="line">  <span class="attr">actions</span>: &#123;</span><br><span class="line">    <span class="comment">/************/</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 状态</span></span><br><span class="line">  <span class="title function_">state</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">sum</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="attr">school</span>: <span class="string">&quot;atguigu&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 计算</span></span><br><span class="line">  <span class="attr">getters</span>: &#123;</span><br><span class="line">    <span class="attr">bigSum</span>: (state): <span class="function"><span class="params">number</span> =&gt;</span> state.<span class="property">sum</span> * <span class="number">10</span>,</span><br><span class="line">    <span class="title function_">upperSchool</span>(): string &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">school</span>.<span class="title function_">toUpperCase</span>();</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>组件中读取数据：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; increment, decrement &#125; = countStore;</span><br><span class="line"><span class="keyword">let</span> &#123; sum, school, bigSum, upperSchool &#125; = <span class="title function_">storeToRefs</span>(countStore);</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="【-subscribe-订阅】"><a href="#【-subscribe-订阅】" class="headerlink" title="【$subscribe 订阅】"></a>【$subscribe 订阅】</h3><p>通过 store 的 <code>$subscribe()</code> 方法侦听 <code>state</code> 及其变化</p>
<figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">talkStore.$subscribe(<span class="function">(<span class="params">mutate, state</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;LoveTalk&quot;</span>, mutate, state);</span><br><span class="line">  <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;talk&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(talkList.<span class="property">value</span>)); <span class="comment">//首先需要转化成字符串才能正常显示</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>补充一小点 上面我们把数据储存到浏览器本地储存 这样就可以一直保留这个数据 并且对于数据的共享更加灵活 当然对应的 在我们的 store 里也应该对应做出一些改变</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">state</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">talkList</span>:<span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;talkList&#x27;</span>) <span class="keyword">as</span> string) || [] <span class="comment">// 这里我们把字符串反序列化成对象 as是typescript中的断言 用于去掉警告 并且我们放一个空数组作为选项</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<p>这样我们就能拿到储存在浏览器本地的数据了</p>
<h3 id="【store-组合式写法】"><a href="#【store-组合式写法】" class="headerlink" title="【store 组合式写法】"></a>【store 组合式写法】</h3><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineStore &#125; <span class="keyword">from</span> <span class="string">&quot;pinia&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&quot;axios&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; nanoid &#125; <span class="keyword">from</span> <span class="string">&quot;nanoid&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; reactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> useTalkStore = <span class="title function_">defineStore</span>(<span class="string">&quot;talk&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// talkList就是state</span></span><br><span class="line">  <span class="keyword">const</span> talkList = <span class="title function_">reactive</span>(</span><br><span class="line">    <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;talkList&quot;</span>) <span class="keyword">as</span> <span class="built_in">string</span>) || []</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getATalk函数相当于action</span></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">getATalk</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 发请求，下面这行的写法是：连续解构赋值+重命名</span></span><br><span class="line">    <span class="keyword">let</span> &#123;</span><br><span class="line">      <span class="attr">data</span>: &#123; <span class="attr">content</span>: title &#125;,</span><br><span class="line">    &#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&quot;https://api.uomg.com/api/rand.qinghua?format=json&quot;</span>);</span><br><span class="line">    <span class="comment">// 把请求回来的字符串，包装成一个对象</span></span><br><span class="line">    <span class="keyword">let</span> obj = &#123; <span class="attr">id</span>: <span class="title function_">nanoid</span>(), title &#125;;</span><br><span class="line">    <span class="comment">// 放到数组中</span></span><br><span class="line">    talkList.<span class="title function_">unshift</span>(obj);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123; talkList, getATalk &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="【组件通信】"><a href="#【组件通信】" class="headerlink" title="【组件通信】"></a>【组件通信】</h2><h3 id="【props】-2"><a href="#【props】-2" class="headerlink" title="【props】"></a>【props】</h3><p>概述：<code>props</code>是使用频率最高的一种通信方式，常用与 ：<strong>父 ↔ 子</strong>。</p>
<ul>
<li>若 <strong>父传子</strong>：属性值是<strong>非函数</strong>。</li>
<li>若 <strong>子传父</strong>：属性值是<strong>函数</strong>。</li>
</ul>
<p>父组件：</p>
<p><strong>父组件传递 Props</strong></p>
<p>父组件通过属性绑定的方式向子组件传递数据，与 HTML 属性写法类似。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;父组件，&lt;/h3&gt;</span><br><span class="line">    &lt;h4&gt;我的车：&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;儿子给的玩具：&#123;&#123; toy &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;Child :car=&quot;car&quot; :getToy=&quot;getToy&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">import Child from &quot;./Child.vue&quot;;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">// 数据</span><br><span class="line">const car = ref(&quot;奔驰&quot;);</span><br><span class="line">const toy = ref();</span><br><span class="line">// 方法</span><br><span class="line">function getToy(value: string) &#123;</span><br><span class="line">  toy.value = value;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>子组件</p>
<p><strong>子组件定义与接收 Props</strong></p>
<p>在 Vue 3 中，子组件通过 <code>defineProps()</code> 宏来声明接收的 props（无需导入，Vue 会自动处理）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;</span><br><span class="line">    &lt;h3&gt;子组件&lt;/h3&gt;</span><br><span class="line">    &lt;h4&gt;我的玩具：&#123;&#123; toy &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;父给我的车：&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;button @click=&quot;getToy(toy)&quot;&gt;玩具给父亲&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Child&quot;&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">const toy = ref(&quot;奥特曼&quot;);</span><br><span class="line"></span><br><span class="line">defineProps([&quot;car&quot;, &quot;getToy&quot;]);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>我们简单在这里写一点东西来解释一下上面的父传子和子传父 我们说父传子传非函数 如父组件中的 car 我们只需要暴露出来此参数 然后直接用插值语法 子传父传函数 但我们实际上需要在父组件中写一个函数来接受这个传递的数据 这也就是我们为什么说子传父传函数 并且这个函数当我们 defineprops 后是可以直接使用的</p>
<h3 id="【自定义事件】"><a href="#【自定义事件】" class="headerlink" title="【自定义事件】"></a>【自定义事件】</h3><p>在 Vue 3 中，自定义事件是子组件向父组件传递数据或触发父组件逻辑的重要方式，与 <code>props</code>（父传子）形成互补，共同实现组件间的双向通信。</p>
<p><strong>基本概念</strong></p>
<p>自定义事件允许子组件<strong>主动触发</strong>一个事件，并传递数据给父组件，父组件通过监听该事件来执行相应的处理逻辑。</p>
<p><strong>基本用法</strong></p>
<ol>
<li><strong>子组件触发自定义事件</strong></li>
</ol>
<p>子组件通过 <code>defineEmits()</code> 宏声明可以触发的事件（无需导入），然后使用 <strong><code>emit</code> 函数</strong>触发事件并传递数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 子组件 Child.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button @click=&quot;handleClick&quot;&gt;点击传递数据&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">// 声明可以触发的事件（数组形式，指定事件名称）</span><br><span class="line">const emit = defineEmits([&quot;submit&quot;, &quot;update&quot;]);</span><br><span class="line"></span><br><span class="line">const handleClick = () =&gt; &#123;</span><br><span class="line">  // 触发事件，并传递数据（可传多个参数）</span><br><span class="line">  emit(&quot;submit&quot;, &quot;这是子组件传递的数据&quot;, 123);</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>父组件监听自定义事件</strong></li>
</ol>
<p>父组件通过 <code>v-on</code>（简写 <code>@</code>）监听子组件触发的事件，并定义处理函数接收数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 父组件 Parent.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- 监听子组件的 submit 事件 --&gt;</span><br><span class="line">    &lt;Child @submit=&quot;handleSubmit&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup&gt;</span><br><span class="line">import Child from &quot;./Child.vue&quot;;</span><br><span class="line"></span><br><span class="line">// 处理子组件触发的事件，接收传递的数据</span><br><span class="line">const handleSubmit = (msg, num) =&gt; &#123;</span><br><span class="line">  console.log(&quot;收到子组件数据：&quot;, msg, num); // 输出：收到子组件数据：这是子组件传递的数据 123</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ol>
<li>概述：自定义事件常用于：<strong>子 &#x3D;&gt; 父。</strong></li>
<li>注意区分好：原生事件、自定义事件。</li>
</ol>
<ul>
<li>原生事件：<ul>
<li>事件名是特定的（<code>click</code>、<code>mosueenter</code>等等）</li>
<li>事件对象<code>$event</code>: 是包含事件相关信息的对象（<code>pageX</code>、<code>pageY</code>、<code>target</code>、<code>keyCode</code>）</li>
</ul>
</li>
<li>自定义事件：<ul>
<li>事件名是任意名称</li>
<li><strong style="color:red">事件对象<code>$event</code>: 是调用<code>emit</code>时所提供的数据，可以是任意类型！！！</strong ></li>
</ul>
</li>
</ul>
<ol start="3">
<li><p>示例：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--在父组件中，给子组件绑定自定义事件：--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Child</span> @<span class="attr">send-toy</span>=<span class="string">&quot;toy = $event&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--注意区分原生事件与自定义事件中的$event--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;toy = $event&quot;</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//子组件中，触发事件：</span></span><br><span class="line"><span class="variable language_">this</span>.$emit(<span class="string">&quot;send-toy&quot;</span>, 具体数据);</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="【mitt】"><a href="#【mitt】" class="headerlink" title="【mitt】"></a>【mitt】</h3><p>概述：与消息订阅与发布（<code>pubsub</code>）功能类似，可以实现任意组件间通信。</p>
<p>简单地比喻一下 mitt 的作用 其实就是一个中间人的角色 能够脱离父子关系 进行任意组件间的通信</p>
<p>安装<code>mitt</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i mitt</span><br></pre></td></tr></table></figure>

<p>新建文件：<code>src\utils\emitter.ts</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入mitt</span></span><br><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&quot;mitt&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建emitter</span></span><br><span class="line"><span class="keyword">const</span> emitter = <span class="title function_">mitt</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  // 绑定事件</span></span><br><span class="line"><span class="comment">  emitter.on(&#x27;abc&#x27;,(value)=&gt;&#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;abc事件被触发&#x27;,value)</span></span><br><span class="line"><span class="comment">  &#125;)</span></span><br><span class="line"><span class="comment">  emitter.on(&#x27;xyz&#x27;,(value)=&gt;&#123;</span></span><br><span class="line"><span class="comment">    console.log(&#x27;xyz事件被触发&#x27;,value)</span></span><br><span class="line"><span class="comment">  &#125;)</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  setInterval(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">    // 触发事件</span></span><br><span class="line"><span class="comment">    emitter.emit(&#x27;abc&#x27;,666)</span></span><br><span class="line"><span class="comment">    emitter.emit(&#x27;xyz&#x27;,777)</span></span><br><span class="line"><span class="comment">  &#125;, 1000);</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  setTimeout(() =&gt; &#123;</span></span><br><span class="line"><span class="comment">    // 清理事件</span></span><br><span class="line"><span class="comment">    emitter.all.clear()</span></span><br><span class="line"><span class="comment">  &#125;, 3000); </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建并暴露mitt</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> emitter;</span><br></pre></td></tr></table></figure>

<p>接收数据的组件中：绑定事件、同时在销毁前解绑事件：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;@/utils/emitter&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; onUnmounted &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 绑定事件</span></span><br><span class="line">emitter.<span class="title function_">on</span>(<span class="string">&quot;send-toy&quot;</span>, <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;send-toy事件被触发&quot;</span>, value);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="title function_">onUnmounted</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 解绑事件</span></span><br><span class="line">  emitter.<span class="title function_">off</span>(<span class="string">&quot;send-toy&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>【第三步】：提供数据的组件，在合适的时候触发事件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> emitter <span class="keyword">from</span> <span class="string">&quot;@/utils/emitter&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sendToy</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 触发事件</span></span><br><span class="line">  emitter.<span class="title function_">emit</span>(<span class="string">&quot;send-toy&quot;</span>, toy.<span class="property">value</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意这个重要的内置关系，总线依赖着这个内置关系</strong></p>
<h3 id="【v-model】"><a href="#【v-model】" class="headerlink" title="【v-model】"></a>【v-model】</h3><p>v-model 双向绑定 所谓双向就是 能够实现从数据到页面 再从页面到数据 同时既能子传父又能父传子</p>
<ol>
<li><p>概述：实现 <strong>父 ↔ 子</strong> 之间相互通信。</p>
</li>
<li><p>前序知识 —— <code>v-model</code>的本质</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 使用v-model指令 --&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; v-model=&quot;userName&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- v-model的本质是下面这行代码 --&gt;</span><br><span class="line">&lt;input</span><br><span class="line">  type=&quot;text&quot;</span><br><span class="line">  :value=&quot;userName&quot;</span><br><span class="line">  @input=&quot;userName =(&lt;HTMLInputElement&gt;$event.target).value&quot;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>组件标签上的<code>v-model</code>的本质：<code>:moldeValue</code> ＋ <code>update:modelValue</code>事件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 组件标签上使用v-model指令 --&gt;</span><br><span class="line">&lt;AtguiguInput v-model=&quot;userName&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 组件标签上v-model的本质 --&gt;</span><br><span class="line">&lt;AtguiguInput</span><br><span class="line">  :modelValue=&quot;userName&quot;</span><br><span class="line">  @update:model-value=&quot;userName = $event&quot;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<p><code>AtguiguInput</code>组件中：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;!--将接收的value值赋给input元素的value属性，目的是：为了呈现数据 --&gt;</span><br><span class="line">    &lt;!--给input元素绑定原生input事件，触发input事件时，进而触发update:model-value事件--&gt;</span><br><span class="line">    &lt;input</span><br><span class="line">      type=&quot;text&quot;</span><br><span class="line">      :value=&quot;modelValue&quot;</span><br><span class="line">      @input=&quot;emit(&#x27;update:model-value&#x27;, $event.target.value)&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;AtguiguInput&quot;&gt;</span><br><span class="line">// 接收props</span><br><span class="line">defineProps([&quot;modelValue&quot;]);</span><br><span class="line">// 声明事件</span><br><span class="line">const emit = defineEmits([&quot;update:model-value&quot;]);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>也可以更换<code>value</code>，例如改成<code>abc</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 也可以更换value，例如改成abc--&gt;</span><br><span class="line">&lt;AtguiguInput v-model:abc=&quot;userName&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 上面代码的本质如下 --&gt;</span><br><span class="line">&lt;AtguiguInput :abc=&quot;userName&quot; @update:abc=&quot;userName = $event&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p><code>AtguiguInput</code>组件中：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;box&quot;&gt;</span><br><span class="line">    &lt;input</span><br><span class="line">      type=&quot;text&quot;</span><br><span class="line">      :value=&quot;abc&quot;</span><br><span class="line">      @input=&quot;emit(&#x27;update:abc&#x27;, $event.target.value)&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;AtguiguInput&quot;&gt;</span><br><span class="line">// 接收props</span><br><span class="line">defineProps([&quot;abc&quot;]);</span><br><span class="line">// 声明事件</span><br><span class="line">const emit = defineEmits([&quot;update:abc&quot;]);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>如果<code>value</code>可以更换，那么就可以在组件标签上多次使用<code>v-model</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;AtguiguInput v-model:abc=&quot;userName&quot; v-model:xyz=&quot;password&quot; /&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>这里我们简单辨析一下上述代码中写到过的$event</p>
<p>$event 到底是啥 啥时候能.target 呢？</p>
<p>对于原生事件 $event 就是事件对象 所以可以使用.target</p>
<p>对于自定义事件，$event就是触发事件时所传递的数据 （即上面写的$event.target.value） 所以不能.target</p>
</li>
</ol>
<h3 id="【-attrs-】"><a href="#【-attrs-】" class="headerlink" title="【$attrs 】"></a>【$attrs 】</h3><ol>
<li><p>概述：<code>$attrs</code>用于实现<strong>当前组件的父组件</strong>，向<strong>当前组件的子组件</strong>通信（<strong>祖 → 孙</strong>）。</p>
</li>
<li><p>具体说明：<code>$attrs</code>是一个对象，包含所有父组件传入的标签属性。</p>
<blockquote>
<p>注意：<code>$attrs</code>会自动排除<code>props</code>中声明的属性(可以认为声明过的 <code>props</code> 被子组件自己“消费”了)</p>
</blockquote>
</li>
</ol>
<p>父组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;父组件&lt;/h3&gt;</span><br><span class="line">    &lt;Child</span><br><span class="line">      :a=&quot;a&quot;</span><br><span class="line">      :b=&quot;b&quot;</span><br><span class="line">      :c=&quot;c&quot;</span><br><span class="line">      :d=&quot;d&quot;</span><br><span class="line">      v-bind=&quot;&#123; x: 100, y: 200 &#125;&quot;</span><br><span class="line">      :updateA=&quot;updateA&quot;</span><br><span class="line">    /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">import Child from &quot;./Child.vue&quot;;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">let a = ref(1);</span><br><span class="line">let b = ref(2);</span><br><span class="line">let c = ref(3);</span><br><span class="line">let d = ref(4);</span><br><span class="line"></span><br><span class="line">function updateA(value) &#123;</span><br><span class="line">  a.value = value;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>子组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;child&quot;&gt;</span><br><span class="line">    &lt;h3&gt;子组件&lt;/h3&gt;</span><br><span class="line">    &lt;GrandChild v-bind=&quot;$attrs&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Child&quot;&gt;</span><br><span class="line">import GrandChild from &quot;./GrandChild.vue&quot;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>孙组件：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;grand-child&quot;&gt;</span><br><span class="line">    &lt;h3&gt;孙组件&lt;/h3&gt;</span><br><span class="line">    &lt;h4&gt;a：&#123;&#123; a &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;b：&#123;&#123; b &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;c：&#123;&#123; c &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;d：&#123;&#123; d &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;x：&#123;&#123; x &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;y：&#123;&#123; y &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;button @click=&quot;updateA(666)&quot;&gt;点我更新A&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;GrandChild&quot;&gt;</span><br><span class="line">defineProps([&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;x&quot;, &quot;y&quot;, &quot;updateA&quot;]);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="【-refs、-parent】"><a href="#【-refs、-parent】" class="headerlink" title="【$refs、$parent】"></a>【$refs、$parent】</h3><ol>
<li><p>概述：</p>
<ul>
<li><code>$refs</code>用于 ：<strong>父 → 子。</strong></li>
<li><code>$parent</code>用于：<strong>子 → 父。</strong></li>
</ul>
</li>
<li><p>原理如下：</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>$refs</code></td>
<td>值为对象，包含所有被<code>ref</code>属性标识的<code>DOM</code>元素或组件实例。</td>
</tr>
<tr>
<td><code>$parent</code></td>
<td>值为对象，当前组件的父组件实例对象。</td>
</tr>
</tbody></table>
</li>
</ol>
<h3 id="【provide、inject】"><a href="#【provide、inject】" class="headerlink" title="【provide、inject】"></a>【provide、inject】</h3><ol>
<li><p>概述：实现<strong>祖孙组件</strong>直接通信</p>
</li>
<li><p>具体使用：</p>
<ul>
<li>在祖先组件中通过<code>provide</code>配置向后代组件提供数据</li>
<li>在后代组件中通过<code>inject</code>配置来声明接收数据</li>
</ul>
</li>
<li><p>具体编码：</p>
<p>【第一步】父组件中，使用<code>provide</code>提供数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;father&quot;&gt;</span><br><span class="line">    &lt;h3&gt;父组件&lt;/h3&gt;</span><br><span class="line">    &lt;h4&gt;资产：&#123;&#123; money &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;汽车：&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;button @click=&quot;money += 1&quot;&gt;资产+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;car.price += 1&quot;&gt;汽车价格+1&lt;/button&gt;</span><br><span class="line">    &lt;Child /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Father&quot;&gt;</span><br><span class="line">import Child from &quot;./Child.vue&quot;;</span><br><span class="line">import &#123; ref, reactive, provide &#125; from &quot;vue&quot;;</span><br><span class="line">// 数据</span><br><span class="line">let money = ref(100);</span><br><span class="line">let car = reactive(&#123;</span><br><span class="line">  brand: &quot;奔驰&quot;,</span><br><span class="line">  price: 100,</span><br><span class="line">&#125;);</span><br><span class="line">// 用于更新money的方法</span><br><span class="line">function updateMoney(value: number) &#123;</span><br><span class="line">  money.value += value;</span><br><span class="line">&#125;</span><br><span class="line">// 提供数据</span><br><span class="line">provide(&quot;moneyContext&quot;, &#123; money, updateMoney &#125;);</span><br><span class="line">provide(&quot;car&quot;, car);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：子组件中不用编写任何东西，是不受到任何打扰的</p>
</blockquote>
<p>【第二步】孙组件中使用<code>inject</code>配置项接受数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;grand-child&quot;&gt;</span><br><span class="line">    &lt;h3&gt;我是孙组件&lt;/h3&gt;</span><br><span class="line">    &lt;h4&gt;资产：&#123;&#123; money &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;h4&gt;汽车：&#123;&#123; car &#125;&#125;&lt;/h4&gt;</span><br><span class="line">    &lt;button @click=&quot;updateMoney(6)&quot;&gt;点我&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;GrandChild&quot;&gt;</span><br><span class="line">import &#123; inject &#125; from &quot;vue&quot;;</span><br><span class="line">// 注入数据</span><br><span class="line">let &#123; money, updateMoney &#125; = inject(&quot;moneyContext&quot;, &#123;</span><br><span class="line">  money: 0,</span><br><span class="line">  updateMoney: (x: number) =&gt; &#123;&#125;,</span><br><span class="line">&#125;);</span><br><span class="line">let car = inject(&quot;car&quot;);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="【pinia】-1"><a href="#【pinia】-1" class="headerlink" title="【pinia】"></a>【pinia】</h3><p>参考之前<code>pinia</code>部分的讲解</p>
<h3 id="【slot】"><a href="#【slot】" class="headerlink" title="【slot】"></a>【slot】</h3><h4 id="1-默认插槽"><a href="#1-默认插槽" class="headerlink" title="1. 默认插槽"></a>1. 默认插槽</h4><p>默认插槽一般用在下面这种场景 即几个组件的基本格式相同 不同的只是里面的内容 使用插槽能够实现该组件样式的使用</p>
<p><img src="/Vue3.assets/default_slot.png" alt="img"></p>
<p>实际上插槽解决的就是 当我们写组件的时候想直接在标签里面写内容是无法显示的 我们需要再该组件的源码中写下插槽 这样我们在组件标签内写的内容就会自动插入这个插槽所在的位置</p>
<p>所以其实插槽很像 routerview 那样的占位符 传递过来的数据内容会显示在那里</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">&lt;Category title=&quot;今日热门游戏&quot;&gt;</span><br><span class="line">          &lt;ul&gt;</span><br><span class="line">            &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">          &lt;/ul&gt;</span><br><span class="line">        &lt;/Category&gt;</span><br><span class="line">子组件中：</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">    &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;!-- 默认插槽 --&gt;</span><br><span class="line">    &lt;slot&gt;&lt;/slot&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h4 id="2-具名插槽"><a href="#2-具名插槽" class="headerlink" title="2. 具名插槽"></a>2. 具名插槽</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">父组件中：</span><br><span class="line">&lt;Category title=&quot;今日热门游戏&quot;&gt;</span><br><span class="line">          &lt;template v-slot:s1&gt;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">              &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;/ul&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">          &lt;template #s2&gt;</span><br><span class="line">            &lt;a href=&quot;&quot;&gt;更多&lt;/a&gt;</span><br><span class="line">          &lt;/template&gt;</span><br><span class="line">        &lt;/Category&gt;</span><br><span class="line">子组件中：</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;item&quot;&gt;</span><br><span class="line">    &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;/h3&gt;</span><br><span class="line">    &lt;slot name=&quot;s1&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;slot name=&quot;s2&quot;&gt;&lt;/slot&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>具名插槽实际上就是给插槽加一个名字 让内容和插槽位置是一一对应的 可以实现乱序插入数据 但显示正确顺序</p>
<p>注意事项是 当我们在父组件组件标签中选择某个插槽时 <strong>v-slot 的选择必须放在 template 里面</strong> 所以我们给插入的数据都放在 template 里面</p>
<p>v-slot:xxx 可以简写为#xxx</p>
<h4 id="3-作用域插槽"><a href="#3-作用域插槽" class="headerlink" title="3.作用域插槽"></a>3.作用域插槽</h4><ol>
<li><p>理解：<span style="color:red">数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。</span>（新闻数据在<code>News</code>组件中，但使用数据所遍历出来的结构由<code>App</code>组件决定） 所谓作用域的问题其实就是因为数据的调用是跨域的 所以我们用作用域插槽去实现 作用域插槽（Scoped Slots）是一种特殊的插槽机制，允许子组件向父组件传递数据，从而实现父子组件之间更灵活的数据交互。</p>
</li>
<li><p>具体编码：</p>
<p>父组件中：</p>
<p>一 直接引入所有 slot 传递的配置项</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;Game v-slot=&quot;params&quot;&gt;</span><br><span class="line">      &lt;!-- &lt;Game v-slot:default=&quot;params&quot;&gt; --&gt;</span><br><span class="line">      &lt;!-- &lt;Game #default=&quot;params&quot;&gt; --&gt; //这是两种别样的写法</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li v-for=&quot;g in params.games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt; </span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/Game&gt;</span><br></pre></td></tr></table></figure>

<p>二 通过解构赋值获得特定的数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;Game v-slot=&quot;&#123; games &#125;&quot;&gt;</span><br><span class="line">      &lt;!-- &lt;Game v-slot:default=&quot;params&quot;&gt; --&gt;</span><br><span class="line">      &lt;!-- &lt;Game #default=&quot;params&quot;&gt; --&gt; //这是两种别样的写法</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li v-for=&quot;g in games&quot; :key=&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;/li&gt; </span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/Game&gt;</span><br></pre></td></tr></table></figure>

<p>子组件中 通过 slot 传递数据</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;category&quot;&gt;</span><br><span class="line">    &lt;h2&gt;今日游戏榜单&lt;/h2&gt;</span><br><span class="line">    &lt;slot :games=&quot;games&quot; a=&quot;哈哈&quot;&gt;&lt;/slot&gt; // 这里可以传入多个props</span><br><span class="line">    都会放进params中 （:games这个名字games是任取的）</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script setup lang=&quot;ts&quot; name=&quot;Category&quot;&gt;</span><br><span class="line">import &#123; reactive &#125; from &quot;vue&quot;;</span><br><span class="line">let games = reactive([</span><br><span class="line">  &#123; id: &quot;asgdytsa01&quot;, name: &quot;英雄联盟&quot; &#125;,</span><br><span class="line">  &#123; id: &quot;asgdytsa02&quot;, name: &quot;王者荣耀&quot; &#125;,</span><br><span class="line">  &#123; id: &quot;asgdytsa03&quot;, name: &quot;红色警戒&quot; &#125;,</span><br><span class="line">  &#123; id: &quot;asgdytsa04&quot;, name: &quot;斗罗大陆&quot; &#125;,</span><br><span class="line">]);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="【shallowRef-与-shallowReactive-】"><a href="#【shallowRef-与-shallowReactive-】" class="headerlink" title="【shallowRef 与 shallowReactive 】"></a>【shallowRef 与 shallowReactive 】</h2><h3 id="shallowRef"><a href="#shallowRef" class="headerlink" title="shallowRef"></a><code>shallowRef</code></h3><ol>
<li><p>作用：创建一个响应式数据，但只对顶层属性进行响应式处理。 只有.value(.xxx)是响应式的 再多点一个就不行了</p>
</li>
<li><p>用法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myVar = <span class="title function_">shallowRef</span>(initialValue);</span><br></pre></td></tr></table></figure>
</li>
<li><p>特点：只跟踪引用值的变化，不关心值内部的属性变化。</p>
</li>
</ol>
<h3 id="shallowReactive"><a href="#shallowReactive" class="headerlink" title="shallowReactive"></a><code>shallowReactive</code></h3><ol>
<li><p>作用：创建一个浅层响应式对象，只会使对象的最顶层属性变成响应式的，对象内部的嵌套属性则不会变成响应式的 只有.xxx 是响应式的 再多点一个就不行了</p>
</li>
<li><p>用法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> myObj = <span class="title function_">shallowReactive</span>(&#123; ... &#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>特点：对象的顶层属性是响应式的，但嵌套对象的属性不是。</p>
</li>
</ol>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><blockquote>
<p>通过使用 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowref"><code>shallowRef()</code></a> 和 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/api/reactivity-advanced.html#shallowreactive"><code>shallowReactive()</code></a> 来绕开深度响应。浅层式 <code>API</code> 创建的状态只在其顶层是响应式的，对所有深层的对象不会做任何处理，避免了对每一个内部属性做响应式所带来的性能成本，这使得属性的访问变得更快，可提升性能。</p>
</blockquote>
<h2 id="【readonly-与-shallowReadonly】"><a href="#【readonly-与-shallowReadonly】" class="headerlink" title="【readonly 与 shallowReadonly】"></a>【readonly 与 shallowReadonly】</h2><h3 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a><strong><code>readonly</code></strong></h3><ol>
<li><p>作用：用于创建一个对象的深只读副本。</p>
</li>
<li><p>用法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="title function_">reactive</span>(&#123; ... &#125;);</span><br><span class="line"><span class="keyword">const</span> readOnlyCopy = <span class="title function_">readonly</span>(original);</span><br></pre></td></tr></table></figure>
</li>
<li><p>特点：</p>
<ul>
<li>对象的所有嵌套属性都将变为只读。</li>
<li>任何尝试修改这个对象的操作都会被阻止（在开发模式下，还会在控制台中发出警告）。</li>
</ul>
</li>
<li><p>应用场景：</p>
<ul>
<li>创建不可变的状态快照。</li>
<li>保护全局状态或配置不被修改。</li>
</ul>
</li>
</ol>
<h3 id="shallowReadonly"><a href="#shallowReadonly" class="headerlink" title="shallowReadonly"></a><strong><code>shallowReadonly</code></strong></h3><ol>
<li><p>作用：与 <code>readonly</code> 类似，但只作用于对象的顶层属性。</p>
</li>
<li><p>用法：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> original = <span class="title function_">reactive</span>(&#123; ... &#125;);</span><br><span class="line"><span class="keyword">const</span> shallowReadOnlyCopy = <span class="title function_">shallowReadonly</span>(original);</span><br></pre></td></tr></table></figure>
</li>
<li><p>特点：</p>
<ul>
<li><p>只将对象的顶层属性设置为只读，对象内部的嵌套属性仍然是可变的。</p>
</li>
<li><p>适用于只需保护对象顶层属性的场景。</p>
</li>
</ul>
</li>
</ol>
<h2 id="【toRaw-与-markRaw】"><a href="#【toRaw-与-markRaw】" class="headerlink" title="【toRaw 与 markRaw】"></a>【toRaw 与 markRaw】</h2><h3 id="toRaw"><a href="#toRaw" class="headerlink" title="toRaw"></a><code>toRaw</code></h3><ol>
<li><p>作用：用于获取一个响应式对象的原始对象， <code>toRaw</code> 返回的对象不再是响应式的，不会触发视图更新。</p>
<blockquote>
<p>官网描述：这是一个可以用于临时读取而不引起代理访问&#x2F;跟踪开销，或是写入而不触发更改的特殊方法。不建议保存对原始对象的持久引用，请谨慎使用。</p>
</blockquote>
<blockquote>
<p>何时使用？ —— 在需要将响应式对象传递给非 <code>Vue</code> 的库或外部系统时，使用 <code>toRaw</code> 可以确保它们收到的是普通对象</p>
</blockquote>
</li>
<li><p>具体编码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; reactive, toRaw, markRaw, isReactive &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* toRaw */</span></span><br><span class="line"><span class="comment">// 响应式对象</span></span><br><span class="line"><span class="keyword">let</span> person = <span class="title function_">reactive</span>(&#123; <span class="attr">name</span>: <span class="string">&quot;tony&quot;</span>, <span class="attr">age</span>: <span class="number">18</span> &#125;);</span><br><span class="line"><span class="comment">// 原始对象</span></span><br><span class="line"><span class="keyword">let</span> rawPerson = <span class="title function_">toRaw</span>(person);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* markRaw */</span></span><br><span class="line"><span class="keyword">let</span> citysd = <span class="title function_">markRaw</span>([</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&quot;asdda01&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;北京&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&quot;asdda02&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;上海&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&quot;asdda03&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;天津&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&quot;asdda04&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;重庆&quot;</span> &#125;,</span><br><span class="line">]);</span><br><span class="line"><span class="comment">// 根据原始对象citys去创建响应式对象citys2 —— 创建失败，因为citys被markRaw标记了</span></span><br><span class="line"><span class="keyword">let</span> citys2 = <span class="title function_">reactive</span>(citys);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(person));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(rawPerson));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(citys));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">isReactive</span>(citys2));</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="markRaw"><a href="#markRaw" class="headerlink" title="markRaw"></a><code>markRaw</code></h3><ol>
<li><p>作用：标记一个对象，使其<strong>永远不会</strong>变成响应式的。</p>
<blockquote>
<p>例如使用<code>mockjs</code>时，为了防止误把<code>mockjs</code>变为响应式对象，可以使用 <code>markRaw</code> 去标记<code>mockjs</code></p>
</blockquote>
</li>
<li><p>编码：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* markRaw */</span></span><br><span class="line"><span class="keyword">let</span> citys = <span class="title function_">markRaw</span>([</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&quot;asdda01&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;北京&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&quot;asdda02&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;上海&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&quot;asdda03&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;天津&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="string">&quot;asdda04&quot;</span>, <span class="attr">name</span>: <span class="string">&quot;重庆&quot;</span> &#125;,</span><br><span class="line">]);</span><br><span class="line"><span class="comment">// 根据原始对象citys去创建响应式对象citys2 —— 创建失败，因为citys被markRaw标记了</span></span><br><span class="line"><span class="keyword">let</span> citys2 = <span class="title function_">reactive</span>(citys);</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="【customRef】"><a href="#【customRef】" class="headerlink" title="【customRef】"></a>【customRef】</h2><p>作用：创建一个自定义的<code>ref</code>，并对其依赖项跟踪和更新触发进行逻辑控制。</p>
<p>实现防抖效果（<code>useSumRef.ts</code>）：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; customRef &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params"><span class="attr">initValue</span>: <span class="built_in">string</span>, <span class="attr">delay</span>: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> msg = <span class="title function_">customRef</span>(<span class="function">(<span class="params">track, trigger</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="attr">timer</span>: <span class="built_in">number</span>;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="title function_">get</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="title function_">track</span>(); <span class="comment">// 告诉Vue数据msg很重要，要对msg持续关注，一旦变化就更新</span></span><br><span class="line">        <span class="keyword">return</span> initValue;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="title function_">set</span>(<span class="params">value</span>) &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          initValue = value;</span><br><span class="line">          <span class="title function_">trigger</span>(); <span class="comment">//通知Vue数据msg变化了</span></span><br><span class="line">        &#125;, delay);</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> &#123; msg &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>组件中使用：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; msg &#125; = <span class="title function_">useCustomRef</span>(<span class="string">&quot;nnn&quot;</span>, <span class="number">2000</span>);</span><br></pre></td></tr></table></figure>

<h3 id="【Teleport】"><a href="#【Teleport】" class="headerlink" title="【Teleport】"></a>【Teleport】</h3><ul>
<li>什么是 Teleport？—— Teleport 是一种能够将我们的<strong>组件 html 结构</strong>移动到指定位置的技术。 注意 to 后的位置只能是我们 css 中能选择的部分</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">teleport</span> <span class="attr">to</span>=<span class="string">&quot;body&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;modal&quot;</span> <span class="attr">v-show</span>=<span class="string">&quot;isShow&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>我是一个弹窗<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>我是弹窗中的一些内容<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;isShow = false&quot;</span>&gt;</span>关闭弹窗<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">teleport</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="【Suspense】"><a href="#【Suspense】" class="headerlink" title="【Suspense】"></a>【Suspense】</h3><ul>
<li>等待异步组件时渲染一些额外内容，让应用有更好的用户体验</li>
<li>使用步骤：<ul>
<li>异步引入组件</li>
<li>使用<code>Suspense</code>包裹组件，并配置好<code>default</code> 与 <code>fallback</code> 相当于一个插槽 有两个槽可以供你插入</li>
</ul>
</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent, <span class="title class_">Suspense</span> &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Child</span> = <span class="title function_">defineAsyncComponent</span>(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;./Child.vue&quot;</span>));</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;h3&gt;我是App组件&lt;/h3&gt;</span><br><span class="line">    &lt;Suspense&gt;</span><br><span class="line">      &lt;template v-slot:default&gt;</span><br><span class="line">        &lt;Child /&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">      &lt;template v-slot:fallback&gt;</span><br><span class="line">        &lt;h3&gt;加载中.......&lt;/h3&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/Suspense&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<h2 id="【全局-API-转移到应用对象】"><a href="#【全局-API-转移到应用对象】" class="headerlink" title="【全局 API 转移到应用对象】"></a>【全局 API 转移到应用对象】</h2><p>详情看官方文档</p>
<ul>
<li><code>app.component</code></li>
<li><code>app.config</code></li>
<li><code>app.directive</code></li>
<li><code>app.mount</code></li>
<li><code>app.unmount</code></li>
<li><code>app.use</code></li>
</ul>
<h2 id="【其他】"><a href="#【其他】" class="headerlink" title="【其他】"></a>【其他】</h2><ul>
<li><p>过渡类名 <code>v-enter</code> 修改为 <code>v-enter-from</code>、过渡类名 <code>v-leave</code> 修改为 <code>v-leave-from</code>。</p>
</li>
<li><p><code>keyCode</code> 作为 <code>v-on</code> 修饰符的支持。</p>
</li>
<li><p><code>v-model</code> 指令在组件上的使用已经被重新设计，替换掉了 <code>v-bind.sync。</code></p>
</li>
<li><p><code>v-if</code> 和 <code>v-for</code> 在同一个元素身上使用时的优先级发生了变化。</p>
</li>
<li><p>移除了<code>$on</code>、<code>$off</code> 和 <code>$once</code> 实例方法。</p>
</li>
<li><p>移除了过滤器 <code>filter</code>。</p>
</li>
<li><p>移除了<code>$children</code> 实例 <code>propert</code>。</p>
<p>……</p>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://example.com">NJY</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/Vue3/">http://example.com/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/Vue3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://example.com" target="_blank">NJYgocrazy</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a><a class="post-meta__tags" href="/tags/Vue3/">Vue3</a></div><div class="post-share"><div class="social-share" data-image="https://s21.ax1x.com/2025/09/22/pV4zO8P.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/JavaScript%E5%9F%BA%E7%A1%80/" title="JavaScript基础"><img class="cover" src="https://s21.ax1x.com/2025/06/23/pVe9ZQA.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">JavaScript基础</div></div><div class="info-2"><div class="info-item-1">JavaScript基础学习</div></div></div></a><a class="pagination-related" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/%E5%88%9D%E9%9B%AA/" title="初雪"><img class="cover" src="https://s21.ax1x.com/2025/04/29/pE7rah4.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">初雪</div></div><div class="info-2"><div class="info-item-1">因为我始终觉得，写在这雪上的名字，应该属于我。</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/%E5%89%8D%E5%90%8E%E5%8F%B0%E9%A1%B9%E7%9B%AE/" title="后台管理项目"><img class="cover" src="https://s21.ax1x.com/2025/09/22/pV5SCUs.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-22</div><div class="info-item-2">后台管理项目</div></div><div class="info-2"><div class="info-item-1">Vue3相关技术栈搭建一个管理项目</div></div></div></a><a class="pagination-related" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/1.HTML/" title="HTML笔记"><img class="cover" src="https://s21.ax1x.com/2025/06/23/pVZxhx1.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-22</div><div class="info-item-2">HTML笔记</div></div><div class="info-2"><div class="info-item-1">HTML的初步学习！</div></div></div></a><a class="pagination-related" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/CSS/" title="CSS笔记"><img class="cover" src="https://s21.ax1x.com/2025/06/23/pVZxIr6.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-22</div><div class="info-item-2">CSS笔记</div></div><div class="info-2"><div class="info-item-1">CSS的初步学习！</div></div></div></a><a class="pagination-related" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/JavaScript%E5%9F%BA%E7%A1%80/" title="JavaScript基础"><img class="cover" src="https://s21.ax1x.com/2025/06/23/pVe9ZQA.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-22</div><div class="info-item-2">JavaScript基础</div></div><div class="info-2"><div class="info-item-1">JavaScript基础学习</div></div></div></a><a class="pagination-related" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84markdown%E5%8F%8C%E8%A7%86%E5%9B%BE%E7%BC%96%E8%BE%91%E5%99%A8/" title="实现一个简单的markdown双视图编辑器"><img class="cover" src="https://s21.ax1x.com/2025/09/22/pV4zjv8.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-22</div><div class="info-item-2">实现一个简单的markdown双视图编辑器</div></div><div class="info-2"><div class="info-item-1">markdown双视图编辑器</div></div></div></a><a class="pagination-related" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/%E7%AB%A5%E5%B9%B4%E5%9B%9E%E5%BF%86-%E7%B1%BB%E5%8A%A0%E9%80%9F%E7%90%83%E7%9A%84%E6%B0%B4%E7%90%83%E5%8A%A0%E8%BD%BD%E5%8A%A8%E7%94%BB/" title="实现一个小水球动画"><img class="cover" src="https://s21.ax1x.com/2025/06/23/pVe9FiD.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-09-22</div><div class="info-item-2">实现一个小水球动画</div></div><div class="info-2"><div class="info-item-1">用原生js实现一个小水球动画！</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/ava.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">NJY</div><div class="author-info-description">LEC SWPU 前端</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">11</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90v-%E3%80%91"><span class="toc-number">1.</span> <span class="toc-text">【v-】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%A0%B8%E5%BF%83%E6%B8%B2%E6%9F%93%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A%E6%8C%87%E4%BB%A4"><span class="toc-number">1.1.</span> <span class="toc-text">一、核心渲染与数据绑定指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-v-text"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. v-text</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-v-html"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. v-html</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-v-bind%EF%BC%88%E7%AE%80%E5%86%99-%EF%BC%89"><span class="toc-number">1.1.3.</span> <span class="toc-text">3. v-bind（简写 :）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93%E6%8C%87%E4%BB%A4"><span class="toc-number">1.2.</span> <span class="toc-text">二、条件渲染指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-v-if"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. v-if</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-v-show"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. v-show</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93%E6%8C%87%E4%BB%A4"><span class="toc-number">1.3.</span> <span class="toc-text">三、列表渲染指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#v-for"><span class="toc-number">1.3.1.</span> <span class="toc-text">v-for</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.</span> <span class="toc-text">四、事件处理指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#v-on%EF%BC%88%E7%AE%80%E5%86%99-%EF%BC%89"><span class="toc-number">1.4.1.</span> <span class="toc-text">v-on（简写 @）</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%94%E3%80%81%E8%A1%A8%E5%8D%95%E8%BE%93%E5%85%A5%E7%BB%91%E5%AE%9A%E6%8C%87%E4%BB%A4"><span class="toc-number">1.5.</span> <span class="toc-text">五、表单输入绑定指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#v-model"><span class="toc-number">1.5.1.</span> <span class="toc-text">v-model</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%AD%E3%80%81%E5%85%B6%E4%BB%96%E5%AE%9E%E7%94%A8%E6%8C%87%E4%BB%A4"><span class="toc-number">1.6.</span> <span class="toc-text">六、其他实用指令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-v-pre"><span class="toc-number">1.6.1.</span> <span class="toc-text">1. v-pre</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-v-cloak"><span class="toc-number">1.6.2.</span> <span class="toc-text">2. v-cloak</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-v-once"><span class="toc-number">1.6.3.</span> <span class="toc-text">3. v-once</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%E3%80%91"><span class="toc-number">2.</span> <span class="toc-text">【响应式数据】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90toRefs-%E4%B8%8E-toRef%E3%80%91"><span class="toc-number">3.</span> <span class="toc-text">【toRefs 与 toRef】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90computed%E3%80%91"><span class="toc-number">4.</span> <span class="toc-text">【computed】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90watch%E3%80%91"><span class="toc-number">5.</span> <span class="toc-text">【watch】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%83%85%E5%86%B5%E4%B8%80"><span class="toc-number">5.1.</span> <span class="toc-text">* 情况一</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%83%85%E5%86%B5%E4%BA%8C"><span class="toc-number">5.2.</span> <span class="toc-text">* 情况二</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%83%85%E5%86%B5%E4%B8%89"><span class="toc-number">5.3.</span> <span class="toc-text">* 情况三</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%83%85%E5%86%B5%E5%9B%9B"><span class="toc-number">5.4.</span> <span class="toc-text">* 情况四</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%83%85%E5%86%B5%E4%BA%94"><span class="toc-number">5.5.</span> <span class="toc-text">* 情况五</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90watchEffect%E3%80%91"><span class="toc-number">6.</span> <span class="toc-text">【watchEffect】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90%E6%A0%87%E7%AD%BE%E7%9A%84-ref-%E5%B1%9E%E6%80%A7%E3%80%91"><span class="toc-number">7.</span> <span class="toc-text">【标签的 ref 属性】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90props%E3%80%91"><span class="toc-number">8.</span> <span class="toc-text">【props】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90%E6%A8%A1%E6%9D%BF%E9%9D%99%E6%80%81%E5%B1%9E%E6%80%A7%E4%B8%8E%E5%8A%A8%E6%80%81%E5%B1%9E%E6%80%A7%E3%80%91"><span class="toc-number">9.</span> <span class="toc-text">【模板静态属性与动态属性】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E5%B1%9E%E6%80%A7%EF%BC%88v-bind%EF%BC%89"><span class="toc-number">9.1.</span> <span class="toc-text">动态属性（v-bind）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E7%BB%91%E5%AE%9A%E5%9F%BA%E6%9C%AC%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">9.1.1.</span> <span class="toc-text">（1）绑定基本表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E7%BB%91%E5%AE%9A%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">9.1.2.</span> <span class="toc-text">（2）绑定响应式数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E7%BB%91%E5%AE%9A%E5%AF%B9%E8%B1%A1-%E6%95%B0%E7%BB%84%EF%BC%88%E7%94%A8%E4%BA%8E-class-style%EF%BC%89"><span class="toc-number">9.1.3.</span> <span class="toc-text">（3）绑定对象 &#x2F; 数组（用于 class&#x2F;style）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E7%BB%91%E5%AE%9A%E5%B1%9E%E6%80%A7%E5%90%8D%EF%BC%88%E5%8A%A8%E6%80%81%E5%B1%9E%E6%80%A7%E5%90%8D%EF%BC%89"><span class="toc-number">9.1.4.</span> <span class="toc-text">（4）绑定属性名（动态属性名）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E7%BB%91%E5%AE%9A%E5%B8%83%E5%B0%94%E5%B1%9E%E6%80%A7"><span class="toc-number">9.1.5.</span> <span class="toc-text">（5）绑定布尔属性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90props%E3%80%91-1"><span class="toc-number">10.</span> <span class="toc-text">【props】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E3%80%91"><span class="toc-number">11.</span> <span class="toc-text">【生命周期】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90%E8%87%AA%E5%AE%9A%E4%B9%89-hook%E3%80%91"><span class="toc-number">12.</span> <span class="toc-text">【自定义 hook】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90%E8%B7%AF%E7%94%B1%E3%80%91"><span class="toc-number">13.</span> <span class="toc-text">【路由】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E8%B7%AF%E7%94%B1%E5%88%87%E6%8D%A2%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%AE%9E%E7%8E%B0%E3%80%91"><span class="toc-number">13.1.</span> <span class="toc-text">【路由切换的基本实现】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E4%B8%A4%E4%B8%AA%E6%B3%A8%E6%84%8F%E7%82%B9%E3%80%91"><span class="toc-number">13.2.</span> <span class="toc-text">【两个注意点】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E8%B7%AF%E7%94%B1%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F%E3%80%91"><span class="toc-number">13.3.</span> <span class="toc-text">【路由器工作模式】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90to-%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%86%99%E6%B3%95%E3%80%91"><span class="toc-number">13.4.</span> <span class="toc-text">【to 的两种写法】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%91%BD%E5%90%8D%E8%B7%AF%E7%94%B1%E3%80%91"><span class="toc-number">13.5.</span> <span class="toc-text">【命名路由】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1%E3%80%91"><span class="toc-number">13.6.</span> <span class="toc-text">【嵌套路由】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%8F%82%C2%B7query-%E5%8F%82%E6%95%B0%E3%80%91"><span class="toc-number">13.7.</span> <span class="toc-text">【路由传参·query 参数】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%8F%82%C2%B7params-%E5%8F%82%E6%95%B0%E3%80%91"><span class="toc-number">13.8.</span> <span class="toc-text">【路由传参·params 参数】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E8%B7%AF%E7%94%B1%E7%9A%84-props-%E9%85%8D%E7%BD%AE%E3%80%91"><span class="toc-number">13.9.</span> <span class="toc-text">【路由的 props 配置】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90-replace-%E5%B1%9E%E6%80%A7%E3%80%91"><span class="toc-number">13.10.</span> <span class="toc-text">【 replace 属性】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA%E3%80%91"><span class="toc-number">13.11.</span> <span class="toc-text">【编程式导航】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E9%87%8D%E5%AE%9A%E5%90%91%E3%80%91"><span class="toc-number">13.12.</span> <span class="toc-text">【重定向】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90pinia%E3%80%91"><span class="toc-number">14.</span> <span class="toc-text">【pinia】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E6%90%AD%E5%BB%BA-pinia-%E7%8E%AF%E5%A2%83%E3%80%91"><span class="toc-number">14.1.</span> <span class="toc-text">【搭建 pinia 环境】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E5%AD%98%E5%82%A8-%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%E3%80%91"><span class="toc-number">14.2.</span> <span class="toc-text">【存储+读取数据】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90storeToRefs%E3%80%91"><span class="toc-number">14.3.</span> <span class="toc-text">【storeToRefs】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90getters%E3%80%91"><span class="toc-number">14.4.</span> <span class="toc-text">【getters】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90-subscribe-%E8%AE%A2%E9%98%85%E3%80%91"><span class="toc-number">14.5.</span> <span class="toc-text">【$subscribe 订阅】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90store-%E7%BB%84%E5%90%88%E5%BC%8F%E5%86%99%E6%B3%95%E3%80%91"><span class="toc-number">14.6.</span> <span class="toc-text">【store 组合式写法】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E3%80%91"><span class="toc-number">15.</span> <span class="toc-text">【组件通信】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90props%E3%80%91-2"><span class="toc-number">15.1.</span> <span class="toc-text">【props】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6%E3%80%91"><span class="toc-number">15.2.</span> <span class="toc-text">【自定义事件】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90mitt%E3%80%91"><span class="toc-number">15.3.</span> <span class="toc-text">【mitt】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90v-model%E3%80%91"><span class="toc-number">15.4.</span> <span class="toc-text">【v-model】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90-attrs-%E3%80%91"><span class="toc-number">15.5.</span> <span class="toc-text">【$attrs 】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90-refs%E3%80%81-parent%E3%80%91"><span class="toc-number">15.6.</span> <span class="toc-text">【$refs、$parent】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90provide%E3%80%81inject%E3%80%91"><span class="toc-number">15.7.</span> <span class="toc-text">【provide、inject】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90pinia%E3%80%91-1"><span class="toc-number">15.8.</span> <span class="toc-text">【pinia】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90slot%E3%80%91"><span class="toc-number">15.9.</span> <span class="toc-text">【slot】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E9%BB%98%E8%AE%A4%E6%8F%92%E6%A7%BD"><span class="toc-number">15.9.1.</span> <span class="toc-text">1. 默认插槽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-number">15.9.2.</span> <span class="toc-text">2. 具名插槽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="toc-number">15.9.3.</span> <span class="toc-text">3.作用域插槽</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90shallowRef-%E4%B8%8E-shallowReactive-%E3%80%91"><span class="toc-number">16.</span> <span class="toc-text">【shallowRef 与 shallowReactive 】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#shallowRef"><span class="toc-number">16.1.</span> <span class="toc-text">shallowRef</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shallowReactive"><span class="toc-number">16.2.</span> <span class="toc-text">shallowReactive</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">16.3.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90readonly-%E4%B8%8E-shallowReadonly%E3%80%91"><span class="toc-number">17.</span> <span class="toc-text">【readonly 与 shallowReadonly】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#readonly"><span class="toc-number">17.1.</span> <span class="toc-text">readonly</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shallowReadonly"><span class="toc-number">17.2.</span> <span class="toc-text">shallowReadonly</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90toRaw-%E4%B8%8E-markRaw%E3%80%91"><span class="toc-number">18.</span> <span class="toc-text">【toRaw 与 markRaw】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#toRaw"><span class="toc-number">18.1.</span> <span class="toc-text">toRaw</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#markRaw"><span class="toc-number">18.2.</span> <span class="toc-text">markRaw</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90customRef%E3%80%91"><span class="toc-number">19.</span> <span class="toc-text">【customRef】</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90Teleport%E3%80%91"><span class="toc-number">19.1.</span> <span class="toc-text">【Teleport】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E3%80%90Suspense%E3%80%91"><span class="toc-number">19.2.</span> <span class="toc-text">【Suspense】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90%E5%85%A8%E5%B1%80-API-%E8%BD%AC%E7%A7%BB%E5%88%B0%E5%BA%94%E7%94%A8%E5%AF%B9%E8%B1%A1%E3%80%91"><span class="toc-number">20.</span> <span class="toc-text">【全局 API 转移到应用对象】</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E3%80%90%E5%85%B6%E4%BB%96%E3%80%91"><span class="toc-number">21.</span> <span class="toc-text">【其他】</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/%E5%89%8D%E5%90%8E%E5%8F%B0%E9%A1%B9%E7%9B%AE/" title="后台管理项目"><img src="https://s21.ax1x.com/2025/09/22/pV5SCUs.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="后台管理项目"/></a><div class="content"><a class="title" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/%E5%89%8D%E5%90%8E%E5%8F%B0%E9%A1%B9%E7%9B%AE/" title="后台管理项目">后台管理项目</a><time datetime="2025-09-22T12:54:20.521Z" title="发表于 2025-09-22 12:54:20">2025-09-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84markdown%E5%8F%8C%E8%A7%86%E5%9B%BE%E7%BC%96%E8%BE%91%E5%99%A8/" title="实现一个简单的markdown双视图编辑器"><img src="https://s21.ax1x.com/2025/09/22/pV4zjv8.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="实现一个简单的markdown双视图编辑器"/></a><div class="content"><a class="title" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84markdown%E5%8F%8C%E8%A7%86%E5%9B%BE%E7%BC%96%E8%BE%91%E5%99%A8/" title="实现一个简单的markdown双视图编辑器">实现一个简单的markdown双视图编辑器</a><time datetime="2025-09-22T12:54:20.521Z" title="发表于 2025-09-22 12:54:20">2025-09-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/%E6%A0%91/" title="树"><img src="https://s21.ax1x.com/2025/04/29/pE7rNAU.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="树"/></a><div class="content"><a class="title" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/%E6%A0%91/" title="树">树</a><time datetime="2025-09-22T12:54:20.521Z" title="发表于 2025-09-22 12:54:20">2025-09-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/%E7%AB%A5%E5%B9%B4%E5%9B%9E%E5%BF%86-%E7%B1%BB%E5%8A%A0%E9%80%9F%E7%90%83%E7%9A%84%E6%B0%B4%E7%90%83%E5%8A%A0%E8%BD%BD%E5%8A%A8%E7%94%BB/" title="实现一个小水球动画"><img src="https://s21.ax1x.com/2025/06/23/pVe9FiD.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="实现一个小水球动画"/></a><div class="content"><a class="title" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/%E7%AB%A5%E5%B9%B4%E5%9B%9E%E5%BF%86-%E7%B1%BB%E5%8A%A0%E9%80%9F%E7%90%83%E7%9A%84%E6%B0%B4%E7%90%83%E5%8A%A0%E8%BD%BD%E5%8A%A8%E7%94%BB/" title="实现一个小水球动画">实现一个小水球动画</a><time datetime="2025-09-22T12:54:20.521Z" title="发表于 2025-09-22 12:54:20">2025-09-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/%E7%AE%97%E6%B3%95/" title="算法--从入门到出门"><img src="https://s21.ax1x.com/2025/06/23/pVZxcaF.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="算法--从入门到出门"/></a><div class="content"><a class="title" href="/2025/09/22/%E6%9C%AA%E5%91%BD%E5%90%8D%201/%E7%AE%97%E6%B3%95/" title="算法--从入门到出门">算法--从入门到出门</a><time datetime="2025-09-22T12:54:20.521Z" title="发表于 2025-09-22 12:54:20">2025-09-22</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By NJY</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.3.5</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script> $(".category-list-count").prepend("<i class=\"fas fa-book\"></i>");</script><script> $(".category-list-item").eq(0).insertAfter($(".gallery-group-name").eq(0))</script><script> $(".category-list-item").eq(1).insertAfter($(".gallery-group-name").eq(1))</script><script> $(".category-list-item").eq(2).insertAfter($(".gallery-group-name").eq(2))</script><script> $(".category-list-item").eq(3).insertAfter($(".gallery-group-name").eq(3))</script><script> $(".category-list-item").eq(4).insertAfter($(".gallery-group-name").eq(4))</script><script> $(".category-list-item").eq(5).insertAfter($(".gallery-group-name").eq(5))</script><script> $(".category-list-item a").hide();</script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="N,LOVE,T" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
    function butterfly_categories_card_injector_config(){
      var parent_div_git = document.getElementById('recent-posts');
      var item_html = '<style>li.categoryBar-list-item{width:32.3%;}.categoryBar-list{max-height: 190px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 160px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(https://s21.ax1x.com/2025/06/23/pVe9ueP.png);"> <a class="categoryBar-list-link" href="categories/前端/">前端</a><span class="categoryBar-list-count">7</span><span class="categoryBar-list-descr">前端成长历程</span></li><li class="categoryBar-list-item" style="background:url(https://s21.ax1x.com/2025/06/23/pVe9Tld.jpg);"> <a class="categoryBar-list-link" href="categories/苦吟/">苦吟</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr">苦吟的文学世界</span></li><li class="categoryBar-list-item" style="background:url(https://s21.ax1x.com/2025/06/23/pVe9L0P.png);"> <a class="categoryBar-list-link" href="categories/算法/">算法</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr">算法</span></li></ul></div></div>';
      console.log('已挂载butterfly_categories_card')
      parent_div_git.insertAdjacentHTML("afterbegin",item_html)
      }
    if( document.getElementById('recent-posts') && (location.pathname ==='/'|| '/' ==='all')){
    butterfly_categories_card_injector_config()
    }
  </script><!-- hexo injector body_end end --></body></html>